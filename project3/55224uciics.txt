
filtertree cc 
id
copyright
2007
regents
university
california
redistribution
file
permitted
terms
gnu
public
license
gpl
date
04
08
2007
author
yiming
lu
include
include
include
include
include
include
filtertree
include
util
ed
using
std
setw
filtertree
filtertree
unsigned
const
vector
data
edfunction
leftsign
'
'
rightsign
'
'
function
data
data
headbuckets
new
buckets
analysis
totaltime
0
candidateno
0
shortcandidateno
0
patternno
0
resultno
0
queryno
0
shortqueryno
0
filtertree
filtertree
const
vector
data
const
string
indexfile
leftsign
'
'
rightsign
'
'
data
data
headbuckets
new
buckets
loadindex
indexfile
analysis
totaltime
0
candidateno
0
shortcandidateno
0
patternno
0
resultno
0
queryno
0
shortqueryno
0
filtertree
filtertree
unsigned
0
data
size
delete
counttables
delete
counttables
delete
headbuckets
void
filtertree
build
buildbuckets
counttables
new
counttable
data
size
unsigned
0
data
size
counttables
new
counttable
void
filtertree
saveindex
const
string
indexfile
const
open
index
file
ofstream
ofs
indexfile
str
output
value
ofs
ofs
output
function
value
ofs
unsigned
function
ofs
output
headbuckets
ofs
headbuckets
ofs
close
void
filtertree
loadindex
const
string
indexfile
load
value
function
ifstream
ifs
indexfile
str
ifstream
ifs
unsigned
func
ifs
func
function
edfunction
func
initiate
counttable
counttables
new
counttable
data
size
unsigned
0
data
size
counttables
new
counttable
load
headbuckets
ifs
headbuckets
ifs
close
void
filtertree
search
const
string
query
const
unsigned
editdist
vector
results
string
temp
double
starttime
endtime
double
difftime
starttime
clock
getapproximatematch
query
patternno
editdist
results
endtime
clock
difftime
static
cast
endtime
starttime
clocks
per
sec
totaltime
difftime
void
filtertree
buildbuckets
unsigned
unsigned
idsize
data
size
0
idsize
vector
grams
str2grams
data
grams
leftsign
rightsign
grams
size
0
0
grams
size
insert
gram
grams
corresponding
string
data
hash
table
headbuckets
addtohashtable
grams
str
data
size
void
filtertree
getapproximatematch
const
string
targetword
unsigned
patternid
unsigned
edthreshold
vector
results
unsigned
commongramsno
unsigned
lengthbucket
lengthbucket
vector
positions
new
vector
vector
lengthbuckets
new
vector
function
standardfunction
commongramsno
edthreshold
1
else
commongramsno
edthreshold
1
1
vector
grams
str2grams
targetword
grams
leftsign
rightsign
0
grams
size
lengthbucket
headbuckets
getmatchedbuckets
grams
str
lengthbucket
null
lengthbucket
isempty
false
lengthbuckets
push
back
lengthbucket
positions
push
back
query
short
query
call
mergesort
targetword
length
commongramsno
mergesort
targetword
patternid
positions
edthreshold
lengthbuckets
results
queryno
query
short
query
call
processshortstrings
else
processshortstrings
targetword
patternid
positions
edthreshold
lengthbuckets
results
shortqueryno
delete
positions
delete
lengthbuckets
void
filtertree
processshortstrings
const
string
targetword
unsigned
patternid
const
vector
positions
unsigned
edthreshold
const
vector
lengthbuckets
vector
results
unsigned
unsigned
distance
unsigned
sourcelength
unsigned
targetlength
unsigned
sourceposition
position
corresponding
sourceid
unsigned
targetposition
position
corresponding
targetword
unsigned
commongramsno
const
string
sourceword
signed
differentlength
function
standardfunction
commongramsno
edthreshold
1
else
commongramsno
edthreshold
1
1
targetlength
targetword
length
0
data
size
sourceword
data
sourcelength
sourceword
length
differentlength
signed
sourcelength
signed
targetlength
sourcelength
function
standardfunction
distance
ed
sourceword
targetword
else
distance
edswap
sourceword
targetword
distance
size
traverse
gram
level
lengthbucket
lengthbuckets
targetposition
positions
signed
lowboundlen
signed
targetlength
signed
edthreshold
signed
upperboundlen
signed
targetlength
signed
edthreshold
signed
lowboundpos
signed
targetposition
signed
edthreshold
signed
upperboundpos
signed
targetposition
signed
edthreshold
unsigned
numofgroups
lengthbucket
getsize
0
numofgroups
traverse
length
level
sourcelength
lengthbucket
getgroups
getlength
signed
sourcelength
signed
commongramsno
signed
sourcelength
lowboundlen
signed
sourcelength
getgroups
getpositions
unsigned
numofpositions
lengthbucket
getgroups
getsize
unsigned
index
0
index
numofpositions
index
traverse
position
level
sourceposition
strpos
index
getposition
signed
sourceposition
lowboundpos
signed
sourceposition
getsize
0
numofstrs
sourceid
strpos
index
getstrids
sourceword
data
sourceid
count
counttables
sourceid
getcount
patternid
count
counttables
sourceid
getmaxcount
sourcelength
commongramsno
targetlength
commongramsno
count
counttables
sourceid
addcount
patternid
signed
count
signed
sourcelength
signed
commongramsno
signed
count
signed
targetlength
signed
commongramsno
shortcandidateno
function
standardfunction
distance
ed
sourceword
targetword
else
distance
edswap
sourceword
targetword
already
candidate
set
count
maxcount
counttables
sourceid
resetcount
patternid
distance
upperboundpos
break
skip
rest
nodes
length
level
else
signed
sourcelength
upperboundlen
break
void
filtertree
mergesort
const
string
targetword
unsigned
patternid
const
vector
positions
unsigned
edthreshold
const
vector
lengthbuckets
vector
results
unsigned
count
0
unsigned
distance
unsigned
sourceid
id
strings
dataset
dictionary
unsigned
sourceposition
position
corresponding
sourceid
unsigned
targetposition
position
corresponding
targetpattern
unsigned
targetlength
length
pattern
unsigned
sourcelength
length
string
dataset
const
string
sourceword
string
dataset
dictionary
unsigned
commongramsno
function
standardfunction
commongramsno
edthreshold
1
else
commongramsno
edthreshold
1
1
unsigned
lengthbucket
lengthbucket
targetlength
targetword
length
0
lengthbuckets
size
traverse
gram
level
lengthbucket
lengthbuckets
targetposition
positions
signed
lowboundlen
signed
targetlength
signed
edthreshold
signed
upperboundlen
signed
targetlength
signed
edthreshold
signed
lowboundpos
signed
targetposition
signed
edthreshold
signed
upperboundpos
signed
targetposition
signed
edthreshold
unsigned
numofgroups
lengthbucket
getsize
0
numofgroups
traverse
length
level
sourcelength
lengthbucket
getgroups
getlength
signed
sourcelength
lowboundlen
signed
sourcelength
getgroups
getpositions
unsigned
numofpositions
lengthbucket
getgroups
getsize
unsigned
index
0
index
numofpositions
index
traverse
position
level
sourceposition
strpos
index
getposition
signed
sourceposition
lowboundpos
signed
sourceposition
getsize
0
numofstrs
sourceid
strpos
index
getstrids
sourceword
data
sourceid
count
counttables
sourceid
getcount
patternid
count
counttables
sourceid
getmaxcount
sourcelength
commongramsno
targetlength
commongramsno
count
counttables
sourceid
addcount
patternid
signed
count
signed
sourcelength
signed
commongramsno
signed
count
signed
targetlength
signed
commongramsno
candidateno
function
standardfunction
distance
ed
sourceword
targetword
else
distance
edswap
sourceword
targetword
already
candidate
set
count
maxcount
counttables
sourceid
resetcount
patternid
distance
upperboundpos
break
skip
rest
nodes
length
level
else
signed
sourcelength
upperboundlen
break
void
filtertree
reportanalyses
cout
endl
cout
number
strings
workload
patternno
endl
cout
total
cpu
time
approximate
string
processing
totaltime
endl
cout
total
number
candidates
long
strings
unsigned
candidateno
endl
cout
total
number
candidates
short
strings
unsigned
shortcandidateno
endl
cout
total
number
long
queries
unsigned
queryno
endl
cout
total
number
short
queries
unsigned
shortqueryno
endl
cout
total
number
results
double
resultno
endl
cout
total
memory
headbuckets
getmemory


gram cc 
id
gram
cc
5149
2010
03
24
23
37
18z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
01
30
2007
author
rares
vernica
include
gram
include
include
input
include
misc
hash
hashstring
void
str2grams
const
string
vector
res
unsigned
unsigned
char
st
unsigned
char
en
const
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
push
back
spad
substr
void
str2grams
const
string
vector
res
unsigned
unsigned
char
st
unsigned
char
en
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
push
back
hashstring
spad
substr
void
str2grams
const
string
multiset
res
unsigned
unsigned
char
st
unsigned
char
en
const
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
insert
spad
substr
void
str2grams
const
string
multiset
res
unsigned
unsigned
char
st
unsigned
char
en
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
insert
hashstring
spad
substr
void
str2grams
const
string
set
res
unsigned
unsigned
char
st
unsigned
char
en
const
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
insert
spad
substr
void
str2grams
const
string
set
res
unsigned
unsigned
char
st
unsigned
char
en
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
insert
hashstring
spad
substr
void
str2grams
const
string
map
res
unsigned
unsigned
char
st
unsigned
char
en
const
string
spad
string
1
st
string
1
en
unsigned
0
length
1
res
hashstring
spad
substr
void
str2gramsnoprepost
const
string
vector
res
unsigned
unsigned
0
length
1
ignore
gram
space
string
substring
substr
string
size
type
loc
substring
find
'
'
0
loc
string
npos
res
push
back
hashstring
substring
end
void
str2gramsnoprepost
const
string
set
res
unsigned
length
cerr
string
length
length
less
endl
exit
1
unsigned
0
length
1
res
insert
substr
void
str2gramsnoprepost
const
string
set
res
unsigned
unsigned
0
length
1
ignore
gram
space
string
substring
substr
string
size
type
loc
substring
find
'
'
0
loc
string
npos
res
insert
hashstring
substring
end
get
special
grams
contains
ch
set
function
used
synonym
work
void
getspecialgrams
const
string
const
unsigned
const
vector
ch
set
res
unsigned
0
length
1
string
substring
substr
unsigned
0
data
bool
addsten
gramlistmap
idlists
gramlistmap
poslists
unsigned
unsigned
char
st
unsigned
char
en
unsigned
0
gramcodes
addsten
str2grams
data
gramcodes
st
en
else
str2gramsnoprepost
data
gramcodes
unsigned
0
arraygram
new
array
arraygram
append
idlists
gram
arraygram
array
arraypos
new
array
arraypos
append
poslists
gram
arraypos
end
else
array
arraygram
idlists
gram
arraygram
append
array
arraypos
poslists
gram
arraypos
append
end
else
end
end
end
createidposinvertedlists
void
grams2str
const
vector
string
res
const
unsigned
res
unsigned
0
size
1
res
substr
1
1
unsigned
gram2id
const
string
gram
unsigned
id
0
gramlen
gram
length
pos
unsigned
0
gramlen
pos
gramid
charseten
find
gram
pos
string
npos
cerr
find
character
'
gram
'
static
cast
gram
gram
gram
charset
endl
exit
exit
failure
id
pow
gramid
charseten
size
gramlen
1
pos
return
id
void
id2gram
unsigned
id
string
res
const
unsigned
res
id
0
res
string
1
gramid
charseten
id
gramid
charseten
size
res
id
id
gramid
charseten
size
res
length
res
string
1
gramid
charseten
0
res
gramid
const
unsigned
gramid
charsetlenmax
500
const
string
gramid
charseten
'
`
0123456789abcdefghijklmnopqrstuvwxyz
const
string
gramid
gramidsuffix
gid
bin
gramid
gramid
unsigned
char
st
char
en
const
string
charset
bool
withperm
st
st
en
en
charset
string
1
st
charset
string
1
en
charsetlen
charset
size
pow
charsetlen
perm
vector
unsigned
0
perm
withperm
random
shuffle
perm
begin
perm
end
gramid
gramid
const
string
filenameprefix
loaddata
filenameprefix
unsigned
gramid
getid
const
string
gram
const
unsigned
id
0
gramlen
gram
length
pos
unsigned
0
gramlen
pos
charset
find
gram
pos
string
npos
cerr
find
character
'
gram
'
static
cast
gram
gram
gram
charset
endl
exit
exit
failure
id
pow
charsetlen
gramlen
1
pos
return
id
string
gramid
getgram
unsigned
id
const
string
gram
id
0
gram
string
1
charset
id
charsetlen
gram
id
id
charsetlen
gram
length
gram
string
1
charset
0
gram
return
gram
void
gramid
getids
const
string
vector
ids
const
vector
gs
str2grams
gs
vector
const
iterator
gs
begin
gs
end
ids
push
back
getid
void
gramid
getgrams
const
vector
ids
vector
grams
const
vector
const
iterator
ids
begin
ids
end
grams
push
back
getgram
void
gramid
savedata
const
string
filenameprefix
const
string
filename
filenameprefix
gramidsuffix
cerr
write
filename
cerr
flush
ofstream
file
filename
str
ios
ios
binary
file
cerr
open
output
file
filename
endl
exit
exit
failure
file
write
reinterpret
cast
sizeof
unsigned
file
fail
writeerror
filename
file
write
reinterpret
cast
st
sizeof
char
file
fail
writeerror
filename
file
write
reinterpret
cast
en
sizeof
char
file
fail
writeerror
filename
file
write
reinterpret
cast
charsetlen
sizeof
unsigned
file
fail
writeerror
filename
unsigned
0
charsetlen
file
write
reinterpret
cast
charset
sizeof
char
file
fail
writeerror
filename
file
write
reinterpret
cast
sizeof
unsigned
file
fail
writeerror
filename
vector
const
iterator
perm
begin
perm
end
file
write
reinterpret
cast
sizeof
unsigned
file
close
cerr
ok
endl
void
gramid
loaddata
const
string
filenameperfix
string
filename
filenameperfix
gramidsuffix
cerr
read
filename
cerr
flush
ifstream
file
filename
str
ios
ios
binary
file
cerr
open
input
file
filename
endl
exit
exit
failure
file
read
reinterpret
cast
sizeof
unsigned
file
fail
writeerror
filename
file
read
reinterpret
cast
st
sizeof
char
file
fail
writeerror
filename
file
read
reinterpret
cast
en
sizeof
char
file
fail
writeerror
filename
file
read
reinterpret
cast
charsetlen
sizeof
unsigned
file
fail
writeerror
filename
charset
unsigned
0
charsetlen
char
ch
file
read
reinterpret
cast
ch
sizeof
char
file
fail
writeerror
filename
charset
string
1
ch
file
read
reinterpret
cast
sizeof
unsigned
file
fail
writeerror
filename
unsigned
0
unsigned
file
read
reinterpret
cast
sizeof
unsigned
perm
push
back
file
close
cerr
ok
endl
unsigned
gramid
invperm
unsigned
id
const
unsigned
0
perm
size
perm
id
return
cerr
id
id
range
permutation
endl
exit
exit
failure
bool
gramid
consistdata
const
string
filenameprefix
const
string
filenameext
const
string
filename
filenameprefix
gramidsuffix
struct
stat
attrib
attribext
stat
filename
str
attrib
cerr
stat
file
filename
endl
exit
exit
failure
stat
filenameext
str
attribext
cerr
stat
file
filenameext
endl
exit
exit
failure
attribext
st
mtime
res
const
string
delims
string
size
type
begidx
endidx
begidx
find
first
delims
begidx
string
npos
endidx
find
first
delims
begidx
endidx
string
npos
endidx
length
cout
begidx
endidx
substr
begidx
endidx
begidx
endl
res
push
back
substr
begidx
endidx
begidx
begidx
find
first
delims
endidx
wordindex
void
wordindex
build
const
vector
data
wordhash
wordhash
cout
wordindex
build
cout
flush
vector
words
unsigned
0
data
size
words
clear
str2words
data
words
vector
const
iterator
word
words
begin
word
words
end
word
wordhash
word
insert
cout
ok
endl
void
wordindex
build
const
string
filenamedataset
wordhash
wordhash
cout
wordindex
build
cout
flush
ifstream
filedataset
filenamedataset
str
filedataset
cerr
open
input
file
filenamedataset
endl
exit
exit
failure
vector
words
unsigned
0
const
unsigned
maxlinelen
256
char
line
maxlinelen
true
filedataset
getline
line
maxlinelen
filedataset
eof
break
filedataset
fail
cerr
open
reading
input
file
filenamedataset
endl
line
length
might
exceed
maxlinelen
characters
endl
exit
exit
failure
words
clear
str2words
string
line
words
vector
const
iterator
word
words
begin
word
words
end
word
wordhash
word
insert
cout
ok
endl
void
wordindex
build
const
vector
data
wordids
wordids
wordkey
wordkey
cout
wordindex
build
cout
flush
vector
words
unsigned
0
data
size
words
clear
str2words
data
words
vector
const
iterator
word
words
begin
word
words
end
word
pair
wordins
wordkey
insert
make
pair
word
0
unsigned
wordpos
wordins
second
word
wordlevel
wordpos
wordids
size
wordins
first
second
wordpos
ids
ids
ids
insert
wordids
push
back
make
pair
word
ids
else
word
wordlevel
wordpos
wordins
first
second
wordids
wordpos
second
insert
cout
ok
endl
void
wordindex
build
const
string
filenamedataset
wordids
wordids
wordkey
wordkey
cout
wordindex
build
cout
flush
ifstream
filedataset
filenamedataset
str
filedataset
cerr
open
input
file
filenamedataset
endl
exit
exit
failure
vector
words
unsigned
0
const
unsigned
maxlinelen
256
char
line
maxlinelen
true
filedataset
getline
line
maxlinelen
filedataset
eof
break
filedataset
fail
cerr
open
reading
input
file
filenamedataset
endl
line
length
might
exceed
maxlinelen
characters
endl
exit
exit
failure
words
clear
str2words
string
line
words
vector
const
iterator
word
words
begin
word
words
end
word
pair
wordins
wordkey
insert
make
pair
word
0
unsigned
wordpos
wordins
second
word
wordlevel
wordpos
wordids
size
wordins
first
second
wordpos
ids
ids
ids
insert
wordids
push
back
make
pair
word
ids
else
word
wordlevel
wordpos
wordins
first
second
wordids
wordpos
second
insert
cout
ok
endl
void
wordindex
build
const
vector
data
vector
wordvect
vector
idsvect
wordkey
wordposmap
cout
wordindex
build
cout
flush
vector
words
unsigned
pos
unsigned
0
data
size
words
clear
str2words
data
words
vector
const
iterator
word
words
begin
word
words
end
word
pair
ins
wordposmap
insert
make
pair
word
0
ins
second
word
wordhash
pos
wordvect
size
wordvect
push
back
word
ids
ids
ids
insert
idsvect
push
back
ids
ins
first
second
pos
else
word
wordhash
pos
ins
first
second
idsvect
pos
insert
cout
ok
endl
void
wordindex
save
const
string
filenamewords
const
string
filenameids
const
wordhash
wordhash
cerr
write
filenamewords
filenameids
ofstream
filewords
filenamewords
str
ios
filewords
cerr
open
output
file
filenamewords
endl
exit
exit
failure
ofstream
fileids
filenameids
str
ios
ios
binary
fileids
cerr
open
output
file
filenameids
endl
exit
exit
failure
unsigned
size
wordhash
const
iterator
wordhash
begin
wordhash
end
filewords
first
endl
size
second
size
fileids
write
reinterpret
cast
size
sizeof
unsigned
ids
const
iterator
jt
second
begin
jt
second
end
jt
fileids
write
reinterpret
cast
jt
sizeof
unsigned
filewords
close
fileids
close
cerr
ok
endl
void
wordindex
load
const
string
filenamewords
const
string
filenameids
wordhash
wordhash
cerr
read
filenamewords
filenameids
ifstream
filewords
filenamewords
str
ios
filewords
cerr
open
input
file
filenamewords
endl
exit
exit
failure
ifstream
fileids
filenameids
str
ios
ios
binary
fileids
cerr
open
input
file
filenameids
endl
exit
exit
failure
unsigned
size
id
string
word
ids
ids
true
hash
filewords
word
filewords
eof
break
ids
clear
fileids
read
reinterpret
cast
size
sizeof
unsigned
unsigned
0
size
fileids
read
reinterpret
cast
id
sizeof
unsigned
ids
insert
id
wordhash
word
ids
filewords
close
fileids
close
cerr
ok
endl
void
wordindex
save
const
string
filenamewids
const
string
filenamewkey
const
wordids
wordids
const
wordkey
wordkey
cerr
write
filenamewids
filenamewkey
ofstream
filewids
filenamewids
str
ios
ios
binary
filewids
cerr
open
output
file
filenamewids
endl
exit
exit
failure
unsigned
size
wordids
const
iterator
wordids
begin
wordids
end
size
second
size
filewids
write
reinterpret
cast
size
sizeof
unsigned
ids
const
iterator
jt
second
begin
jt
second
end
jt
filewids
write
reinterpret
cast
jt
sizeof
unsigned
filewids
close
ofstream
filewkey
filenamewkey
str
ios
filewkey
cerr
open
output
file
filenamewkey
endl
exit
exit
failure
wordids
const
iterator
wordids
begin
wordids
end
filewkey
first
wordkey
find
first
second
endl
filewkey
close
cerr
ok
endl
void
wordindex
load
const
string
filenamewids
const
string
filenamewkey
wordids
wordids
wordkey
wordkey
cerr
read
filenamewids
filenamewkey
ifstream
filewids
filenamewids
str
ios
ios
binary
filewids
cerr
open
input
file
filenamewids
endl
exit
exit
failure
ifstream
filewkey
filenamewkey
str
ios
filewkey
cerr
open
input
file
filenamewkey
endl
exit
exit
failure
string
word
unsigned
size
id
ids
ids
true
filewids
read
reinterpret
cast
size
sizeof
unsigned
filewids
eof
break
ids
clear
unsigned
0
size
filewids
read
reinterpret
cast
id
sizeof
unsigned
ids
insert
id
filewkey
word
id
filewkey
eof
cerr
inconsistency
input
file
filenamewkey
endl
exit
exit
failure
wordids
push
back
make
pair
word
ids
wordkey
word
id
filewids
close
filewkey
close
cerr
ok
endl
bool
wordindex
exist
const
string
filename1
const
string
filename2
ifstream
file1
filename1
str
ios
ios
binary
file1
return
false
file1
close
ifstream
file2
filename2
str
ios
file2
return
false
file2
close
return
true
const
string
filenameextwordvect
wi
wv
txt
filenameextidsvect
wi
idv
bin
void
wordindex
save
const
string
filename
const
vector
wordvect
const
vector
idsvect
const
wordkey
wordposmap
const
string
filenamewordvect
filename
filenameextwordvect
filenameidsvect
filename
filenameextidsvect
cerr
write
filenamewordvect
endl
filenameidsvect
cerr
flush
ofstream
filewordvect
filenamewordvect
str
ios
filewordvect
cerr
open
output
file
filenamewordvect
endl
exit
exit
failure
vector
const
iterator
word
wordvect
begin
word
wordvect
end
word
filewordvect
word
endl
filewordvect
close
ofstream
fileidsvect
filenameidsvect
str
ios
ios
binary
fileidsvect
cerr
open
output
file
filenameidsvect
endl
exit
exit
failure
vector
const
iterator
ids
idsvect
begin
ids
idsvect
end
ids
unsigned
size
ids
size
fileidsvect
write
reinterpret
cast
size
sizeof
unsigned
ids
const
iterator
id
ids
begin
id
ids
end
id
fileidsvect
write
reinterpret
cast
id
sizeof
unsigned
fileidsvect
close
cerr
ok
endl
void
wordindex
load
const
string
filename
vector
wordvect
vector
idsvect
wordkey
wordposmap
const
string
filenamewordvect
filename
filenameextwordvect
filenameidsvect
filename
filenameextidsvect
cerr
read
filenamewordvect
endl
filenameidsvect
cerr
flush
readstring
wordvect
filenamewordvect
ifstream
fileidsvect
filenameidsvect
str
ios
ios
binary
fileidsvect
cerr
open
input
file
filenameidsvect
endl
exit
exit
failure
unsigned
0
wordvect
size
unsigned
size
fileidsvect
read
reinterpret
cast
size
sizeof
unsigned
ids
ids
unsigned
el
unsigned
0
size
fileidsvect
read
reinterpret
cast
sizeof
unsigned
ids
insert
el
idsvect
push
back
ids
wordposmap
wordvect
fileidsvect
close
cerr
ok
endl

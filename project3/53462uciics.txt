
stringrm cc 
id
stringrm
cc
5146
2010
03
24
23
05
57z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
09
06
2008
author
alexander
behm
include
include
include
stringrm
int
freespaceentrycmpfunc
const
void
const
void
freespaceentry
freespace
freespaceentry
freespace
return
1
freespaceentry
freespace
freespaceentry
freespace
return
1
freespaceentry
freespace
freespaceentry
freespace
return
0
return
0
void
freespacemanager
insert
const
unsigned
blocknum
const
unsigned
freespace
blockwithspace
entry
blocknum
freespace
freespaceset
iterator
iter
freespaceentries
find
entry
iter
freespaceentries
end
freespaceentries
size
maxentries
freespaceentries
insert
entry
totalfreespace
freespace
else
streampos
avgfreespace
totalfreespace
freespaceentries
size
freespace
avgfreespace
freespaceset
iterator
del
iter
freespaceentries
begin
del
iter
freespaceentries
end
del
iter
del
iter
freespace
avgfreespace
totalfreespace
del
iter
freespace
freespaceentries
erase
del
iter
break
freespaceentries
insert
entry
totalfreespace
freespace
else
totalfreespace
iter
freespace
freespaceentries
erase
iter
freespaceentries
insert
entry
totalfreespace
freespace
unsigned
freespacemanager
getblockwithspace
unsigned
freespace
freespaceset
const
iterator
iter
freespaceentries
begin
iter
freespaceentries
end
iter
iter
freespace
freespace
return
iter
blocknum
return
space
block
void
freespacemanager
print
cout
total
free
space
totalfreespace
endl
cout
avg
free
space
totalfreespace
freespaceentries
size
endl
freespaceset
const
iterator
iter
freespaceentries
begin
iter
freespaceentries
end
iter
cout
iter
blocknum
iter
freespace
endl
cout
endl
buffermanagerrm
buffermanagerrm
fstream
file
unsigned
blocksize
unsigned
bufferslots
file
file
clockhand
null
bufferslots
bufferslots
blocksize
blocksize
init
void
buffermanagerrm
init
bufferentry
runner
new
bufferentry
blocksize
clockhand
runner
unsigned
0
bufferslots
1
runner
next
new
bufferentry
blocksize
runner
runner
next
runner
next
clockhand
close
circle
void
buffermanagerrm
readdiskblock
char
block
const
unsigned
blocknum
file
seekg
blocknum
blocksize
file
read
block
blocksize
void
buffermanagerrm
writediskblock
const
char
block
const
unsigned
blocknum
file
seekp
blocknum
blocksize
file
write
block
blocksize
bufferentry
buffermanagerrm
getblock
unsigned
blocknum
bool
appendblock
tr1
unordered
map
iterator
iter
cachemap
find
blocknum
iter
cachemap
end
find
entry
replace
always
start
next
clockhand
val
0
clockhand
val
0
clockhand
clockhand
next
first
make
old
buffer
slot
persistent
clockhand
dirty
writediskblock
clockhand
data
clockhand
blocknum
cachemap
erase
clockhand
blocknum
appendblock
readdiskblock
clockhand
data
blocknum
clockhand
blocknum
blocknum
clockhand
val
1
clockhand
dirty
false
cachemap
blocknum
clockhand
return
clockhand
else
iter
second
val
1
return
iter
second
bool
buffermanagerrm
incache
unsigned
blocknum
return
cachemap
find
blocknum
cachemap
end
void
buffermanagerrm
flushbuffer
bufferentry
runner
clockhand
runner
next
clockhand
runner
blocknum
unused
buffer
entry
writediskblock
runner
data
runner
blocknum
runner
runner
next
runner
blocknum
unused
buffer
entry
writediskblock
runner
data
runner
blocknum
cachemap
clear
buffermanagerrm
buffermanagerrm
bufferentry
runner
clockhand
runner
next
clockhand
bufferentry
next
runner
next
delete
runner
runner
next
delete
runner
void
stringrm
initdiskblock
char
block
memset
block
0
blocksize
set
whole
block
zeros
set
dictionary
entries
unused
memset
block
dictoffset
char
maxval
numdictslots
sizeof
unsigned
set
next
block
pointer
unused
memset
block
dictoffset
numdictslots
sizeof
unsigned
char
maxval
sizeof
unsigned
set
free
space
entry
freespaceentry
entry
entry
freespace
blocksize
sizeof
unsigned
numdictslots
sizeof
unsigned
numfreespaceslots
sizeof
freespaceentry
entry
offset
numfreespaceslots
sizeof
freespaceentry
addfreespaceentry
block
entry
void
stringrm
addfreespaceentry
char
block
const
freespaceentry
entry
unsigned
0
numfreespaceslots
freespaceentry
tmp
freespaceentry
block
sizeof
freespaceentry
tmp
freespace
unused
free
space
slot
memcpy
tmp
entry
sizeof
freespaceentry
break
numfreespaceslots
cout
error
add
free
space
entry
endl
todo
probably
schedule
re
org
page
always
sort
free
space
entries
sortfreespaceentries
block
void
stringrm
sortfreespaceentries
char
block
qsort
block
numfreespaceslots
sizeof
freespaceentry
freespaceentrycmpfunc
unsigned
stringrm
getnextblocknum
char
block
return
block
nextblockoffset
unsigned
stringrm
insertstringintoblock
bufferentry
bufferentry
const
string
implement
first
fit
policy
char
block
bufferentry
data
freespaceentry
entry
freespaceentry
block
entry
freespace
size
sizeof
unsigned
return
space
block
means
enough
space
try
add
entry
dictionary
unsigned
insertedslot
0
unsigned
slotcounter
slotcounter
0
slotcounter
numdictslots
slotcounter
unsigned
dictentry
unsigned
block
dictoffset
slotcounter
sizeof
unsigned
dictentry
unused
dict
slot
dictentry
entry
offset
insertedslot
slotcounter
break
slotcounter
numdictslots
return
space
block
add
data
block
unsigned
strlength
size
const
char
rawdata
str
memcpy
block
entry
offset
strlength
sizeof
unsigned
memcpy
block
entry
offset
sizeof
unsigned
rawdata
strlength
modify
free
space
entry
todo
merge
adjacent
free
space
blocks
entry
freespace
entry
freespace
strlength
4
entry
offset
entry
offset
strlength
4
sortfreespaceentries
block
set
dirty
bit
bufferentry
dirty
true
return
insertedslot
void
stringrm
insertstringintolastblock
const
string
recordid
rid
unsigned
retval
0
bufferentry
block
buffermanager
getblock
lastfileblock
retval
insertstringintoblock
block
retval
space
block
lastfileblock
block
buffermanager
getblock
lastfileblock
true
initdiskblock
block
data
retval
insertstringintoblock
block
rid
blocknum
lastfileblock
rid
slotnum
retval
void
stringrm
retrievestring
string
target
const
recordid
rid
bufferentry
entry
buffermanager
getblock
rid
blocknum
char
block
entry
data
unsigned
stroffset
memcpy
stroffset
block
dictoffset
rid
slotnum
sizeof
unsigned
sizeof
unsigned
unsigned
strlen
memcpy
strlen
block
stroffset
sizeof
unsigned
target
assign
block
stroffset
sizeof
unsigned
strlen
void
stringrm
insertstring
const
string
recordid
rid
unsigned
freeblock
freespacemanager
getblockwithspace
size
sizeof
unsigned
freeblock
space
block
insertstringintolastblock
rid
else
bufferentry
block
buffermanager
getblock
freeblock
insertstringintoblock
block
stringrm
stringrm
unsigned
bufferslots
blocksize
0
numdictslots
0
numfreespaceslots
0
dictoffset
0
nextblockoffset
0
lastfileblock
1
bufferslots
bufferslots
freespacemanager
null
buffermanager
null
void
stringrm
createstringcollection
const
char
filename
const
unsigned
blocksize
const
unsigned
avgstrlen
file
open
file
close
file
open
filename
ios
ios
fstream
trunc
file
open
cout
error
open
file
filename
endl
blocksize
blocksize
numdictslots
blocksize
avgstrlen
sizeof
unsigned
numfreespaceslots
numdictslots
2
dictoffset
blocksize
sizeof
unsigned
numdictslots
sizeof
unsigned
nextblockoffset
blocksize
sizeof
unsigned
lastfileblock
1
freespacemanager
delete
freespacemanager
freespacemanager
new
freespacemanager
buffermanager
delete
buffermanager
buffermanager
new
buffermanagerrm
file
blocksize
bufferslots
bufferentry
entry
buffermanager
getblock
0
true
writecollectiondescr
entry
data
entry
dirty
true
entry
buffermanager
getblock
1
true
initdiskblock
entry
data
entry
dirty
true
buffermanager
flushbuffer
file
close
void
stringrm
openstringcollection
const
char
filename
bool
disablestreambuffer
file
open
file
close
disablestreambuffer
file
rdbuf
pubsetbuf
0
0
file
open
filename
ios
ios
file
open
cout
error
open
file
filename
endl
readcollectiondescr
freespacemanager
delete
freespacemanager
freespacemanager
new
freespacemanager
buffermanager
delete
buffermanager
buffermanager
new
buffermanagerrm
file
blocksize
bufferslots
void
stringrm
writecollectiondescr
char
block
char
runner
block
memset
block
0
blocksize
memcpy
runner
void
blocksize
sizeof
unsigned
runner
sizeof
unsigned
memcpy
runner
void
numdictslots
sizeof
unsigned
runner
sizeof
unsigned
memcpy
runner
numfreespaceslots
sizeof
unsigned
runner
sizeof
unsigned
memcpy
runner
dictoffset
sizeof
unsigned
runner
sizeof
unsigned
memcpy
runner
nextblockoffset
sizeof
unsigned
runner
sizeof
unsigned
memcpy
runner
lastfileblock
sizeof
unsigned
runner
sizeof
unsigned
memcpy
runner
bufferslots
sizeof
unsigned
void
stringrm
readcollectiondescr
file
seekp
0
file
read
char
blocksize
sizeof
unsigned
file
read
char
numdictslots
sizeof
unsigned
file
read
char
numfreespaceslots
sizeof
unsigned
file
read
char
dictoffset
sizeof
unsigned
file
read
char
nextblockoffset
sizeof
unsigned
file
read
char
lastfileblock
sizeof
unsigned
file
read
char
bufferslots
sizeof
unsigned
forces
flushing
cache
disk
void
stringrm
flushcache
update
meta
information
bufferentry
descrentry
buffermanager
getblock
0
writecollectiondescr
descrentry
data
flush
dirty
pages
buffermanager
flushbuffer
bool
stringrm
incache
const
recordid
rid
return
buffermanager
incache
rid
blocknum
stringrm
stringrm
file
open
file
close
freespacemanager
delete
freespacemanager
buffermanager
buffermanager
flushbuffer
delete
buffermanager


ftsearcherondisk 
id
ftsearcherondisk
5788
2010
10
22
10
09
57z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
09
06
2008
author
alexander
behm
ifndef
ftsearcherondisk
define
ftsearcherondisk
include
ftsearcherabs
include
ftindexerondisk
include
listmerger
src
ondiskmergersimple
include
listmerger
src
ondiskmergeradapt
include
util
src
misc
template
class
ftsearcherondisk
template
struct
ftsearchertraits
typedef
tftindexer
ftindexer
typedef
tmerger
merger
template
class
merger
ondiskmergersimple
class
ftsearcherondisk
public
ftsearcherabs
private
void
setmergerestimationparams
unsigned
numberlistprobes
unsigned
numberstringprobes
bool
clearbuffers
true
void
clearosbuffers
static
stringcontainerrm
strrm
static
bool
cmpcandis
unsigned
unsigned
bool
acached
strrm
incache
bool
bcached
strrm
incache
acached
bcached
return
else
acached
return
true
else
bcached
return
false
else
return
void
resetmergerstats
strlcstats
querylcstats
strhcstats
queryhcstats
public
typedef
ftindexertraits
indexertraitstype
typedef
typename
indexertraitstype
invlist
invlist
typedef
ftsearcherabs
superclass
ifdef
debug
stat
typedef
ondiskworkloadstats
wlstatstype
typedef
ondiskquerystats
querystatstype
endif
ftsearcherondisk
merger
merger
ftindexer
ftindexer
null
superclass
merger
ftindexer
ifdef
debug
stat
querystats
new
querystatstype
endif
void
prepare
impl
void
processleaves
impl
const
vector
leaves
const
query
query
const
vector
querygramcodes
vector
resultstringids
void
searchleafnodespanic
impl
const
vector
leaves
const
query
query
vector
resultstringids
string
getname
return
ftsearcherondisk
template
stringcontainerrm
ftsearcherondisk
strrm
template
void
ftsearcherondisk
searchleafnodespanic
impl
const
vector
leaves
const
query
query
vector
resultstringids
ifdef
debug
stat
sutil
starttimemeasurement
endif
ftindexer
filtertypes
size
0
vector
candidates
unsigned
0
leaves
size
filtertreenode
leaf
leaves
add
stringids
leaf
leaf
distinctstringids
vector
stringids
leaf
distinctstringids
getarray
ftindexer
getinvlistsfile
unsigned
0
stringids
size
bool
pmfpruned
false
switch
ftindexer
pmf
case
pmf
csf
reg
case
pmf
csf
opt
pmfpruned
ftindexer
charsumfilter
passesfilter
merger
querycharsumstats
merger
charsumstats
stringids
unsigned
query
threshold
break
case
pmf
lc
pmfpruned
lettercountfilter
querylcstats
ftindexer
datalcstats
stringids
ftindexer
lccharnum
query
threshold
break
case
pmf
hc
pmfpruned
hashcountfilter
queryhcstats
ftindexer
datahcstats
stringids
ftindexer
hcbuckets
query
threshold
break
default
break
pmfpruned
candidates
push
back
stringids
leaf
distinctstringids
clear
leaves
size
1
sort
candidates
begin
candidates
end
retrieve
strings
compute
similarities
unsigned
0
candidates
size
unsigned
stringid
candidates
string
dictstring
ftindexer
strcontainer
retrievestring
dictstring
stringid
query
sim
simbatch
dictstring
query
str
query
threshold
resultstringids
push
back
stringid
else
search
stringids
string
dictstring
unsigned
0
ftindexer
strcontainer
size
bool
pmfpruned
false
switch
ftindexer
pmf
case
pmf
csf
reg
case
pmf
csf
opt
pmfpruned
ftindexer
charsumfilter
passesfilter
merger
querycharsumstats
merger
charsumstats
unsigned
query
threshold
break
case
pmf
lc
pmfpruned
lettercountfilter
querylcstats
ftindexer
datalcstats
ftindexer
lccharnum
query
threshold
break
case
pmf
hc
pmfpruned
hashcountfilter
queryhcstats
ftindexer
datahcstats
ftindexer
hcbuckets
query
threshold
break
default
break
pmfpruned
ftindexer
strcontainer
retrievestring
dictstring
query
sim
simbatch
dictstring
query
str
query
threshold
resultstringids
push
back
ifdef
debug
stat
sutil
stoptimemeasurement
querystats
panictime
sutil
gettimemeasurement
querystats
panics
endif
count
number
pages
read
panic
ifdef
debug
stat
ftindexer
filtertypes
size
0
vector
candidates
unsigned
0
leaves
size
filtertreenode
leaf
leaves
set
rids
add
stringids
leaf
leaf
distinctstringids
vector
stringids
leaf
distinctstringids
getarray
ftindexer
getinvlistsfile
unsigned
0
stringids
size
bool
pmfpruned
false
switch
ftindexer
pmf
case
pmf
csf
reg
case
pmf
csf
opt
pmfpruned
ftindexer
charsumfilter
passesfilter
merger
querycharsumstats
merger
charsumstats
stringids
unsigned
query
threshold
break
case
pmf
lc
pmfpruned
lettercountfilter
querylcstats
ftindexer
datalcstats
stringids
ftindexer
lccharnum
query
threshold
break
case
pmf
hc
pmfpruned
hashcountfilter
queryhcstats
ftindexer
datahcstats
stringids
ftindexer
hcbuckets
query
threshold
break
default
break
pmfpruned
recordid
rid
ftindexer
strcontainer
getrecordid
stringids
rids
insert
rid
blocknum
leaf
distinctstringids
clear
dynamic
cast
querystats
postprocpages
rids
size
else
search
stringids
set
rids
unsigned
0
ftindexer
strcontainer
size
bool
pmfpruned
false
switch
ftindexer
pmf
case
pmf
csf
reg
case
pmf
csf
opt
pmfpruned
ftindexer
charsumfilter
passesfilter
merger
querycharsumstats
merger
charsumstats
unsigned
query
threshold
break
case
pmf
lc
pmfpruned
lettercountfilter
querylcstats
ftindexer
datalcstats
ftindexer
lccharnum
query
threshold
break
case
pmf
hc
pmfpruned
hashcountfilter
queryhcstats
ftindexer
datahcstats
ftindexer
hcbuckets
query
threshold
break
default
break
pmfpruned
recordid
rid
ftindexer
strcontainer
getrecordid
rids
insert
rid
blocknum
dynamic
cast
querystats
postprocpages
rids
size
endif
template
void
ftsearcherondisk
resetmergerstats
merger
invlistseeks
0
merger
invlistdata
0
0
merger
initialcandidates
0
template
void
ftsearcherondisk
prepare
impl
pubmed
dataset
without
caching
merger
estimationparamsneeded
merger
setestimationparams
0
000119582f
19
5736f
28
065f
google
dataset
without
caching
merger
estimationparamsneeded
merger
setestimationparams
8
79494e
05
18
6529
23
8775
google
dataset
caching
merger
estimationparamsneeded
merger
setestimationparams
4
34583e
06
0
00537823
0
00711457
google
40m
caching
merger
setestimationparams
9
53673e
05
9
32022
8
5017
google
5m
caching
merger
setestimationparams
0
000215111
6
462
6
23133
dblp
author
2
9m
caching
merger
setestimationparams
4
43372e
06
0
00407912
0
00761566
dblp
author
without
caching
merger
setestimationparams
4
21529e
05
16
9139
13
224
dblp
title
without
caching
merger
setestimationparams
4
36368e
05
17
9738
14
9673
imdb
actor
without
caching
merger
setestimationparams
5
62684e
05
16
3402
12
7929
uniprot
without
caching
merger
setestimationparams
5
44773e
05
15
7422
14
291
average
merger
setestimationparams
0
000049134
16
742525
13
8188
merger
estimationparamsneeded
setmergerestimationparams
5000
5000
true
merger
setgramgen
gramgen
merger
charsumstats
ftindexer
charsumstats
merger
charsumfilter
ftindexer
charsumfilter
merger
gramcode2gram
ftindexer
gramcode2gram
merger
pmf
ftindexer
pmf
merger
lccharnum
ftindexer
lccharnum
merger
querylcstats
querylcstats
merger
datalcstats
ftindexer
datalcstats
merger
hcbuckets
ftindexer
hcbuckets
merger
queryhcstats
queryhcstats
merger
datahcstats
ftindexer
datahcstats
resetmergerstats
template
void
ftsearcherondisk
clearosbuffers
int
system
sync
system
echo
3
proc
sys
vm
drop
caches
template
void
ftsearcherondisk
setmergerestimationparams
unsigned
numberlistprobes
unsigned
numberstringprobes
bool
clearbuffers
clearbuffers
clearosbuffers
srand
150
statsutil
sutil
vector
leaves
ftindexer
filtertreeroot
getsubtreeleaves
ftindexer
filtertreeroot
leaves
vector
probegramlists
unsigned
0
leaves
size
filtertreenode
leaf
leaves
typename
filtertreenode
grammap
iterator
iter
set
sizesadded
iter
leaf
grammap
begin
iter
leaf
grammap
end
iter
gramlistondisk
gl
dynamic
cast
iter
second
sizesadded
find
gl
listsize
sizesadded
end
probegramlists
push
back
gl
sizesadded
insert
gl
listsize
vector
xvals
vector
yvals
unsigned
0
numberlistprobes
unsigned
index
random
probegramlists
size
gramlistondisk
gl
probegramlists
index
unsigned
bytes
gl
listsize
invlist
elementsize
char
data
new
char
bytes
clearbuffers
clearosbuffers
sutil
starttimemeasurement
ftindexer
invlistsfile
seekg
gl
startoffset
ftindexer
invlistsfile
read
data
bytes
sutil
stoptimemeasurement
float
sutil
gettimemeasurement
delete
data
xvals
push
back
gl
listsize
yvals
push
back
float
slope
float
intercept
linearregression
xvals
yvals
slope
intercept
now
get
average
time
retrieving
string
stringcontainer
float
avgtime
0
0f
unsigned
0
numberstringprobes
unsigned
stringid
random
ftindexer
strcontainer
size
clearbuffers
clearosbuffers
sutil
starttimemeasurement
string
tmp
ftindexer
strcontainer
retrievestring
tmp
stringid
sutil
stoptimemeasurement
avgtime
sutil
gettimemeasurement
avgtime
numberstringprobes
ensure
slope
negative
slope
max
slope
0
0f
set
estimation
parameters
merger
setestimationparams
slope
intercept
avgtime
cout
slope
slope
endl
cout
intercept
intercept
endl
cout
avgtime
avgtime
endl
clearbuffers
clearosbuffers
template
void
ftsearcherondisk
processleaves
impl
const
vector
leaves
const
query
query
const
vector
querygramcodes
vector
resultstringids
ifdef
debug
stat
resetmergerstats
endif
gather
query's
stats
post
merge
filtering
switch
ftindexer
pmf
case
pmf
csf
reg
case
pmf
csf
opt
merger
querycharsumstats
new
querycharsumstats
query
str
query
threshold
ftindexer
charsumfilter
break
case
pmf
lc
querylcstats
set
query
str
ftindexer
lccharnum
ftindexer
lcchars
break
case
pmf
hc
queryhcstats
set
querygramcodes
ftindexer
hcbuckets
break
default
break
step
0
check
panic
signed
mergethreshold
searchleafnodespanic
leaves
query
resultstringids
return
ifdef
debug
stat
querystats
strlen
query
str
size
querystats
mergethresh
mergethreshold
querystats
simthresh
query
threshold
endif
set
required
info
merger
filters
ftindexer
filtertypes
size
0
merger
numberstringsinleaf
push
back
ftindexer
strcontainer
size
prepare
pass
information
merger
vector
alllists
vector
candidates
step
1
preprocess
ifdef
debug
stat
sutil
starttimemeasurement
endif
unsigned
0
leaves
size
vector
currentlists
new
vector
leaves
getquerygramlists
querygramcodes
currentlists
currentlists
size
mergethreshold
ftindexer
filtertypes
size
0
unsigned
stringsinleaf
dynamic
cast
leaves
distinctstringids
listsize
merger
numberstringsinleaf
push
back
stringsinleaf
alllists
push
back
currentlists
ifdef
debug
stat
sutil
stoptimemeasurement
querystats
preproctime
sutil
gettimemeasurement
endif
ifdef
debug
stat
sutil
starttimemeasurement
endif
step
2
1
merge
merger
merge
query
alllists
mergethreshold
ftindexer
invlistsfile
ftindexer
filtertypes
size
candidates
ifdef
debug
stat
sutil
stoptimemeasurement
querystats
mergetime
sutil
gettimemeasurement
querystats
candidates
candidates
size
dynamic
cast
querystats
invlistseeks
merger
invlistseeks
dynamic
cast
querystats
invlistdata
merger
invlistdata
dynamic
cast
querystats
initialcandidates
merger
initialcandidates
endif
sort
candidates
first
whether
page
cache
second
stringid
ftsearcherondisk
strrm
dynamic
cast
ftindexer
strcontainer
sort
candidates
begin
candidates
end
ftsearcherondisk
cmpcandis
ifdef
debug
stat
count
number
pages
read
set
rids
unsigned
0
candidates
size
recordid
rid
ftindexer
strcontainer
getrecordid
candidates
rids
insert
rid
blocknum
dynamic
cast
querystats
postprocpages
rids
size
endif
step
2
2
postprocess
postprocess
query
candidates
resultstringids
cleanup
delete
temporary
structures
inverted
lists
unsigned
0
alllists
size
vector
currentlists
alllists
unsigned
0
currentlists
size
dynamic
cast
currentlists
gl
clear
delete
currentlists
delete
alllists
ftindexer
pmf
pmf
csf
reg
ftindexer
pmf
pmf
csf
opt
delete
merger
querycharsumstats
endif

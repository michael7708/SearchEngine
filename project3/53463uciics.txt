
stringrm 
id
stringrm
5229
2010
05
11
05
44
03z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
09
06
2008
author
alexander
behm
ifndef
stringrm
define
stringrm
include
include
include
include
define
unused
dict
slot
0xffffffff
define
unused
next
ptr
0xffffffff
define
unused
buffer
entry
0xffffffff
define
space
block
0xffffffff
define
char
maxval
0xff
define
unused
free
space
slot
0x00000000
using
namespace
std
typedef
struct
unsigned
blocknum
unsigned
slotnum
recordid
manages
free
space
block
level
class
freespacemanager
private
inner
class
class
blockwithspace
public
unsigned
blocknum
unsigned
freespace
blockwithspace
blockwithspace
unsigned
blocknum
unsigned
freespace
blocknum
blocknum
freespace
freespace
bool
operator
const
blockwithspace
lhs
const
blockwithspace
rhs
const
return
lhs
blocknum
rhs
blocknum
typedef
set
freespaceset
unsigned
maxentries
streampos
totalfreespace
freespaceset
freespaceentries
public
freespacemanager
const
unsigned
maxentries
2000
maxentries
maxentries
totalfreespace
0
void
insert
const
unsigned
blocknum
const
unsigned
freespace
unsigned
getblockwithspace
unsigned
freespace
void
print
typedef
struct
unsigned
freespace
unsigned
offset
freespaceentry
int
freespaceentrycmpfunc
const
void
const
void
class
bufferentry
public
bufferentry
next
char
data
char
val
unsigned
blocknum
bool
dirty
void
reset
blocknum
unused
buffer
entry
val
char
0
dirty
false
bufferentry
unsigned
blocksize
next
null
data
new
char
blocksize
reset
bufferentry
data
delete
data
buffer
manager
implements
clock
algorithm
class
buffermanagerrm
private
fstream
file
tr1
unordered
map
cachemap
bufferentry
clockhand
implementing
clock
algorithm
unsigned
bufferslots
unsigned
blocksize
void
init
void
readdiskblock
char
block
const
unsigned
blocknum
void
writediskblock
const
char
block
const
unsigned
blocknum
public
buffermanagerrm
fstream
file
unsigned
blocksize
unsigned
bufferslots
10
bufferentry
getblock
unsigned
blocknum
bool
appendblock
false
void
flushbuffer
bool
incache
unsigned
blocknum
buffermanagerrm
class
stringrm
private
unsigned
blocksize
unsigned
numdictslots
unsigned
numfreespaceslots
unsigned
dictoffset
unsigned
nextblockoffset
unsigned
lastfileblock
unsigned
bufferslots
fstream
file
freespacemanager
freespacemanager
buffermanagerrm
buffermanager
void
initdiskblock
char
block
void
addfreespaceentry
char
block
const
freespaceentry
entry
void
sortfreespaceentries
char
block
unsigned
getnextblocknum
char
block
unsigned
insertstringintoblock
bufferentry
entry
const
string
void
insertstringintolastblock
const
string
recordid
rid
void
writecollectiondescr
char
block
void
readcollectiondescr
void
initcache
public
stringrm
unsigned
bufferslots
1
void
createstringcollection
const
char
filename
const
unsigned
blocksize
4096
const
unsigned
avgstrlen
50
void
openstringcollection
const
char
filename
bool
disablestreambuffer
false
void
insertstring
const
string
recordid
rid
void
retrievestring
string
target
const
recordid
rid
void
flushcache
bool
incache
const
recordid
rid
stringrm
endif

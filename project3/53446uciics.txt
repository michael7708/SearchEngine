
ftsearcherondisk 
id
ftsearcherondisk
5229
2010
05
11
05
44
03z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
09
06
2008
author
alexander
behm
ifndef
ftsearcherondisk
define
ftsearcherondisk
include
ftsearcherabs
include
ftindexerondisk
include
listmerger
ondiskmergersimple
include
listmerger
ondiskmergeradapt
include
util
misc
template
class
ftsearcherondisk
template
struct
ftsearchertraits
typedef
tftindexer
ftindexer
typedef
tmerger
merger
template
class
merger
ondiskmergersimple
class
ftsearcherondisk
public
ftsearcherabs
private
void
setmergerestimationparams
unsigned
numberlistprobes
unsigned
numberstringprobes
bool
clearbuffers
true
void
clearosbuffers
static
stringcontainerrm
strrm
static
bool
cmpcandis
unsigned
unsigned
bool
acached
strrm
incache
bool
bcached
strrm
incache
acached
bcached
return
else
acached
return
true
else
bcached
return
false
else
return
public
typedef
ftindexertraits
indexertraitstype
typedef
typename
indexertraitstype
invlist
invlist
typedef
ftsearcherabs
superclass
ifdef
debug
stat
typedef
ondiskworkloadstats
wlstatstype
typedef
ondiskquerystats
querystatstype
endif
ftsearcherondisk
merger
merger
ftindexer
ftindexer
null
superclass
merger
ftindexer
ifdef
debug
stat
querystats
new
querystatstype
endif
void
prepare
impl
void
processleaves
impl
const
vector
leaves
const
query
query
const
vector
querygramcodes
vector
resultstringids
void
searchallleafnodespanic
const
vector
leaves
const
query
query
vector
resultstringids
string
getname
return
ftsearcherondisk
template
stringcontainerrm
ftsearcherondisk
strrm
template
void
ftsearcherondisk
searchallleafnodespanic
const
vector
leaves
const
query
query
vector
resultstringids
ifdef
debug
stat
sutil
starttimemeasurement
endif
ftindexer
filtertypes
size
0
vector
candidates
unsigned
0
leaves
size
filtertreenode
leaf
leaves
add
stringids
leaf
leaf
distinctstringids
array
stringids
leaf
distinctstringids
getarray
ftindexer
getinvlistsfile
unsigned
0
stringids
size
ftindexer
csfopts
csf
none
ftindexer
charsumfilter
passesfilter
merger
querycharsumstats
merger
charsumstats
stringids
unsigned
query
threshold
candidates
push
back
stringids
else
candidates
push
back
stringids
leaf
distinctstringids
clear
leaves
size
1
sort
candidates
begin
candidates
end
retrieve
strings
compute
similarities
unsigned
0
candidates
size
unsigned
stringid
candidates
string
dictstring
ftindexer
strcontainer
retrievestring
dictstring
stringid
query
sim
dictstring
query
str
query
threshold
resultstringids
push
back
stringid
else
search
stringids
string
dictstring
unsigned
0
ftindexer
strcontainer
size
ftindexer
strcontainer
retrievestring
dictstring
query
sim
dictstring
query
str
query
threshold
resultstringids
push
back
ifdef
debug
stat
sutil
stoptimemeasurement
querystats
panictime
sutil
gettimemeasurement
querystats
panics
endif
template
void
ftsearcherondisk
prepare
impl
pubmed
dataset
without
caching
merger
estimationparamsneeded
merger
setestimationparams
0
000119582f
19
5736f
28
065f
google
dataset
without
caching
merger
estimationparamsneeded
merger
setestimationparams
8
79494e
05
18
6529
23
8775
google
dataset
caching
merger
estimationparamsneeded
merger
setestimationparams
4
34583e
06
0
00537823
0
00711457
merger
estimationparamsneeded
setmergerestimationparams
5000
5000
false
merger
setgramgen
gramgen
merger
charsumstats
ftindexer
charsumstats
merger
charsumfilter
ftindexer
charsumfilter
merger
gramcode2gram
ftindexer
gramcode2gram
merger
numberseeks
0
template
ondiskmergeradapt
prepare
impl
template
void
ftsearcherondisk
clearosbuffers
int
system
sync
system
echo
3
proc
sys
vm
drop
caches
template
void
ftsearcherondisk
setmergerestimationparams
unsigned
numberlistprobes
unsigned
numberstringprobes
bool
clearbuffers
clearbuffers
clearosbuffers
srand
150
statsutil
sutil
vector
leaves
ftindexer
filtertreeroot
getsubtreeleaves
ftindexer
filtertreeroot
leaves
vector
probegramlists
unsigned
0
leaves
size
filtertreenode
leaf
leaves
typename
filtertreenode
grammap
iterator
iter
set
sizesadded
iter
leaf
grammap
begin
iter
leaf
grammap
end
iter
gramlistondisk
gl
dynamic
cast
iter
second
sizesadded
find
gl
listsize
sizesadded
end
probegramlists
push
back
gl
sizesadded
insert
gl
listsize
vector
xvals
vector
yvals
unsigned
0
numberlistprobes
unsigned
index
random
probegramlists
size
gramlistondisk
gl
probegramlists
index
unsigned
bytes
gl
listsize
invlist
elementsize
char
data
new
char
bytes
clearbuffers
clearosbuffers
sutil
starttimemeasurement
ftindexer
invlistsfile
seekg
gl
startoffset
ftindexer
invlistsfile
read
data
bytes
sutil
stoptimemeasurement
float
sutil
gettimemeasurement
delete
data
xvals
push
back
gl
listsize
yvals
push
back
float
slope
float
intercept
linearregression
xvals
yvals
slope
intercept
now
get
average
time
retrieving
string
stringcontainer
float
avgtime
0
0f
unsigned
0
numberstringprobes
unsigned
stringid
random
ftindexer
strcontainer
size
clearbuffers
clearosbuffers
sutil
starttimemeasurement
string
tmp
ftindexer
strcontainer
retrievestring
tmp
stringid
sutil
stoptimemeasurement
avgtime
sutil
gettimemeasurement
avgtime
numberstringprobes
ensure
slope
negative
slope
max
slope
0
0f
set
estimation
parameters
merger
setestimationparams
slope
intercept
avgtime
cout
slope
slope
endl
cout
intercept
intercept
endl
cout
avgtime
avgtime
endl
clearbuffers
clearosbuffers
template
void
ftsearcherondisk
processleaves
impl
const
vector
leaves
const
query
query
const
vector
querygramcodes
vector
resultstringids
gather
query's
charsum
stats
needed
ftindexer
csfopts
csf
none
merger
querycharsumstats
new
querycharsumstats
query
str
query
threshold
ftindexer
charsumfilter
step
0
check
panic
signed
mergethreshold
merger
singlefilteropt
searchallleafnodespanic
leaves
query
resultstringids
else
unsigned
0
leaves
size
searchleafnodepanic
leaves
query
resultstringids
return
ifdef
debug
stat
querystats
strlen
query
str
size
querystats
mergethresh
mergethreshold
querystats
simthresh
query
threshold
endif
set
required
info
merger
filters
ftindexer
filtertypes
size
0
merger
numberstringsinleaf
push
back
ftindexer
strcontainer
size
prepare
pass
information
merger
vector
alllists
vector
candidates
step
1
preprocess
ifdef
debug
stat
sutil
starttimemeasurement
endif
unsigned
0
leaves
size
vector
currentlists
new
vector
leaves
getquerygramlists
querygramcodes
currentlists
currentlists
size
mergethreshold
ftindexer
filtertypes
size
0
unsigned
stringsinleaf
dynamic
cast
leaves
distinctstringids
listsize
merger
numberstringsinleaf
push
back
stringsinleaf
alllists
push
back
currentlists
ifdef
debug
stat
sutil
stoptimemeasurement
querystats
preproctime
sutil
gettimemeasurement
endif
ifdef
debug
stat
sutil
starttimemeasurement
endif
step
2
1
merge
merger
merge
query
alllists
mergethreshold
ftindexer
invlistsfile
ftindexer
filtertypes
size
candidates
ifdef
debug
stat
sutil
stoptimemeasurement
querystats
mergetime
sutil
gettimemeasurement
querystats
candidates
candidates
size
dynamic
cast
querystats
numberseeks
merger
numberseeks
endif
sort
candidates
first
whether
page
cache
second
stringid
ftsearcherondisk
strrm
dynamic
cast
ftindexer
strcontainer
sort
candidates
begin
candidates
end
ftsearcherondisk
cmpcandis
ifdef
debug
stat
count
number
pages
read
set
rids
unsigned
0
candidates
size
recordid
rid
ftindexer
strcontainer
getrecordid
candidates
rids
insert
rid
blocknum
dynamic
cast
querystats
postprocpages
rids
size
endif
step
2
2
postprocess
postprocess
query
candidates
resultstringids
cleanup
delete
temporary
structures
inverted
lists
unsigned
0
alllists
size
vector
currentlists
alllists
unsigned
0
currentlists
size
dynamic
cast
currentlists
gl
clear
delete
currentlists
delete
alllists
ftindexer
csfopts
csf
none
delete
merger
querycharsumstats
endif

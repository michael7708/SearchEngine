
ftindexerondisk 
id
ftindexerondisk
5146
2010
03
24
23
05
57z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
09
06
2008
author
alexander
behm
ifndef
diskindexer
define
diskindexer
include
ftindexerabs
include
ftindexermem
include
gramlistondisk
include
util
misc
include
include
include
include
template
class
ftindexerondisk
template
struct
ftindexertraits
typedef
tstringcontainer
stringcontainer
typedef
tinvlist
invlist
template
class
ftindexerondisk
public
ftindexerabs
protected
typedef
struct
unsigned
gramcode
unsigned
numberelements
char
data
partiallist
typedef
ftindexerabs
superclass
typedef
typename
superclass
grammap
grammap
typedef
pair
gramlistondiskpair
bool
static
cmpgramlistondiskpair
const
gramlistondiskpair
const
gramlistondiskpair
return
second
startoffset
second
startoffset
bool
static
randcmpfiltertreenode
filtertreenode
filtertreenode
return
unsigned
666
unsigned
666
bool
disablestreambuffer
unsigned
maxbytesperrun
string
invlistsfilename
unsigned
totalpartiallists
streampos
indexsize
tr1
unordered
map
totalgramlistsizes
static
vector
stringid2leafid
bool
scatteredorg
filtertreenode
findhomeleafnode
const
string
void
flushrun
ftindexermem
memindexer
fstream
fpout
void
mergeruns
unsigned
numberruns
grammap
targetmap
fstream
fpin
fstream
fpout
void
reorganizeindex
grammap
sourcemap
vector
leaves
fstream
fpindex
void
reorganizeindexflush
vector
datatoflush
fstream
fpindex
streampos
nextwriteoffset
void
scatterindex
vector
leaves
fstream
srcindex
saving
loading
index
void
saveftindexerondiskinfo
ofstream
fpout
void
loadftindexerondiskinfo
ifstream
fpin
void
saveleavesrec
filtertreenode
node
ofstream
fpout
void
loadleavesrec
filtertreenode
node
ifstream
fpin
public
ifdef
debug
stat
typedef
ondiskindexstats
ixstatstype
endif
mapping
hashed
gram
gram
string
experiments
positional
information
unordered
map
gramcode2gram
void
addstringtomap
string
currentstring
ftindexerondisk
stringcontainer
strcontainer
charsumfilteroptions
csfopts
csf
reg
superclass
strcontainer
csfopts
indexsize
0
indexertype
ondisk
ifdef
debug
stat
ixstats
new
ondiskindexstats
endif
ftindexerondisk
stringcontainer
strcontainer
gramgen
gramgen
bool
disablestreambuffer
false
const
string
invlistsfilename
invlists
ix
const
unsigned
maxbytesperrun
5000000
const
unsigned
maxstrlen
150
const
unsigned
ftfanout
50
charsumfilteroptions
csfopts
csf
reg
bool
scatteredorg
false
superclass
strcontainer
gramgen
maxstrlen
ftfanout
csfopts
disablestreambuffer
disablestreambuffer
maxbytesperrun
maxbytesperrun
invlistsfilename
invlistsfilename
indexsize
0
scatteredorg
scatteredorg
indexertype
ondisk
ifdef
debug
stat
ixstats
new
ondiskindexstats
endif
void
buildindex
impl
const
string
datafile
const
unsigned
linestoread
0
void
buildindex
impl
bool
checkcorrectness
ftindexermem
memindexer
const
string
invlistsfilename
void
saveindex
const
char
indexfilename
void
loadindex
const
char
indexfilename
fstream
invlistsfile
void
openinvlistsfile
invlistsfile
open
invlistsfile
close
disablestreambuffer
invlistsfile
rdbuf
pubsetbuf
0
0
invlistsfile
open
invlistsfilename
str
ios
ios
ios
binary
compressionargs
getcompressionargs
impl
return
compressionargs
fstream
getinvlistsfile
impl
return
invlistsfile
string
getname
return
ftindexerondisk
ftindexerondisk
invlistsfile
close
template
void
ftindexerondisk
addstringtomap
string
currentstring
vector
gramcodes
vector
grams
gramgen
decompose
currentstring
gramcodes
gramgen
decompose
currentstring
grams
gramcodes
size
grams
size
cout
error
gram
sets
unequal
size
endl
unsigned
0
grams
size
unsigned
gramcode
gramcodes
string
gram
grams
gramcode2gram
find
gramcode
gramcode2gram
end
string
gramcode2gram
gramcode
size
0
compare
gram
0
clear
else
gramcode2gram
gramcode
gram
template
vector
ftindexerondisk
stringid2leafid
functions
depend
type
inverted
list
element
unsigned
posid
template
class
invlistspecializer
public
typedef
typename
tr1
unordered
map
grammap
typedef
pair
gramlistondiskpair
static
vector
stringid2leafid
static
int
cmp
const
void
const
void
unsigned
unsigned
unsigned
unsigned
stringid2leafid
stringid2leafid
return
1
stringid2leafid
stringid2leafid
return
1
return
0
static
void
updateleafoffsets
gramlistondiskpair
currentpair
pair
writeme
gramlistondisk
gl
vector
leaves
need
update
offsets
filtertree
leaves
unsigned
list
unsigned
writeme
first
unsigned
sortedsublistsize
1
streampos
sortedsublistoffset
gl
startoffset
unsigned
prevleaf
stringid2leafid
list
0
set
first
value
unsigned
1
gl
listsize
unsigned
currentleaf
stringid2leafid
list
currentleaf
prevleaf
update
grammap
appropriate
leaf
grammap
grammap
leaves
prevleaf
grammap
grammap
find
currentpair
first
grammap
end
grammap
currentpair
first
new
gramlistondisk
sortedsublistsize
sortedsublistoffset
prevleaf
currentleaf
sortedsublistsize
1
sortedsublistoffset
gl
startoffset
streampos
invlist
elementsize
else
sortedsublistsize
grammap
grammap
leaves
prevleaf
grammap
grammap
find
currentpair
first
grammap
end
grammap
currentpair
first
new
gramlistondisk
sortedsublistsize
sortedsublistoffset
template
vector
invlistspecializer
stringid2leafid
specialization
array
template
public
typedef
array
invlist
typedef
tr1
unordered
map
grammap
typedef
pair
gramlistondiskpair
static
vector
stringid2leafid
static
int
cmp
const
void
const
void
const
posid
static
cast
const
posid
static
cast
stringid2leafid
id
stringid2leafid
id
id
id
return
1
stringid2leafid
id
stringid2leafid
id
id
id
return
1
stringid2leafid
id
stringid2leafid
id
id
id
return
int
pos
int
pos
return
0
static
void
updateleafoffsets
gramlistondiskpair
currentpair
pair
writeme
gramlistondisk
gl
vector
leaves
need
update
offsets
filtertree
leaves
posid
list
posid
writeme
first
unsigned
sortedsublistsize
1
streampos
sortedsublistoffset
gl
startoffset
unsigned
prevleaf
stringid2leafid
list
0
id
set
first
value
unsigned
1
gl
listsize
unsigned
currentleaf
stringid2leafid
list
id
currentleaf
prevleaf
update
grammap
appropriate
leaf
grammap
grammap
leaves
prevleaf
grammap
grammap
find
currentpair
first
grammap
end
grammap
currentpair
first
new
gramlistondisk
sortedsublistsize
sortedsublistoffset
prevleaf
currentleaf
sortedsublistsize
1
sortedsublistoffset
gl
startoffset
streampos
invlist
elementsize
else
sortedsublistsize
grammap
grammap
leaves
prevleaf
grammap
grammap
find
currentpair
first
grammap
end
grammap
currentpair
first
new
gramlistondisk
sortedsublistsize
sortedsublistoffset
template
void
ftindexerondisk
saveindex
const
char
indexfilename
ofstream
fpout
fpout
open
indexfilename
ios
fpout
open
savebasicinfo
fpout
saveftindexerondiskinfo
fpout
saveleavesrec
filtertreeroot
fpout
fpout
close
else
cout
error
open
file
indexfilename
endl
template
void
ftindexerondisk
loadindex
const
char
indexfilename
ifstream
fpin
fpin
open
indexfilename
ios
fpin
open
filtertypes
clear
loadbasicinfo
fpin
loadftindexerondiskinfo
fpin
buildhollowtreerecursive
filtertreeroot
0
loadleavesrec
filtertreeroot
fpin
fpin
close
else
cout
error
open
file
indexfilename
endl
openinvlistsfile
template
void
ftindexerondisk
saveftindexerondiskinfo
ofstream
fpout
unsigned
size
invlistsfilename
size
fpout
write
const
char
size
sizeof
unsigned
fpout
write
const
char
invlistsfilename
str
size
fpout
write
const
char
maxbytesperrun
sizeof
unsigned
fpout
write
const
char
totalpartiallists
sizeof
unsigned
size
gramcode2gram
size
fpout
write
const
char
size
sizeof
unsigned
unordered
map
iterator
iter
gramcode2gram
begin
iter
gramcode2gram
end
iter
unsigned
gramcode
iter
first
string
gram
iter
second
fpout
write
const
char
gramcode
sizeof
unsigned
size
gram
size
fpout
write
const
char
size
sizeof
unsigned
size
0
fpout
write
const
char
gram
str
size
template
void
ftindexerondisk
saveleavesrec
filtertreenode
node
ofstream
fpout
unsigned
node
isleaf
node
distinctstringids
gramlistondisk
gl
dynamic
cast
node
distinctstringids
fpout
write
const
char
listsize
sizeof
unsigned
fpout
write
const
char
startoffset
sizeof
streampos
else
0
fpout
write
const
char
sizeof
unsigned
write
gram
map
grammap
grammap
node
grammap
grammap
size
fpout
write
const
char
sizeof
unsigned
typename
grammap
iterator
iter
grammap
begin
iter
grammap
end
iter
iter
first
fpout
write
const
char
sizeof
unsigned
gramlistondisk
gl
dynamic
cast
iter
second
fpout
write
const
char
listsize
sizeof
unsigned
fpout
write
const
char
startoffset
sizeof
streampos
else
vector
children
node
children
unsigned
0
children
size
saveleavesrec
children
node
fpout
template
void
ftindexerondisk
loadleavesrec
filtertreenode
node
ifstream
fpin
node
isleaf
node
distinctstringids
delete
node
distinctstringids
unsigned
distinctstrings
fpin
read
char
distinctstrings
sizeof
unsigned
distinctstrings
0
streampos
startoffset
fpin
read
char
startoffset
sizeof
streampos
node
distinctstringids
new
gramlistondisk
distinctstrings
startoffset
grammap
grammap
node
grammap
unsigned
grammapsize
unsigned
gramcode
unsigned
listsize
streampos
startoffset
fpin
read
char
grammapsize
sizeof
unsigned
unsigned
0
grammapsize
fpin
read
char
gramcode
sizeof
unsigned
fpin
read
char
listsize
sizeof
unsigned
fpin
read
char
startoffset
sizeof
streampos
grammap
gramcode
new
gramlistondisk
listsize
startoffset
else
vector
children
node
children
unsigned
0
children
size
loadleavesrec
children
node
fpin
template
void
ftindexerondisk
loadftindexerondiskinfo
ifstream
fpin
unsigned
size
0
fpin
read
char
size
sizeof
unsigned
char
invlistdata
new
char
size
fpin
read
invlistdata
size
invlistsfilename
assign
invlistdata
size
delete
invlistdata
fpin
read
char
maxbytesperrun
sizeof
unsigned
fpin
read
char
totalpartiallists
sizeof
unsigned
fpin
read
char
size
sizeof
unsigned
gramcode2gram
clear
unsigned
0
size
unsigned
gramcode
0
unsigned
gramsize
0
string
gram
fpin
read
char
gramcode
sizeof
unsigned
fpin
read
char
gramsize
sizeof
unsigned
gramsize
0
char
gramtempdata
new
char
gramsize
fpin
read
gramtempdata
gramsize
gram
assign
gramtempdata
gramsize
delete
gramtempdata
gramcode2gram
gramcode
gram
template
void
ftindexerondisk
buildindex
impl
const
string
datafile
const
unsigned
linestoread
strcontainer
fillcontainer
datafile
str
linestoread
maxstrlen
buildindex
template
void
ftindexerondisk
buildindex
impl
ifdef
debug
stat
ixstats
dictsize
strcontainer
size
ixstats
gramlen
gramgen
getgramlength
ixstats
maxstrlen
maxstrlen
ixstats
ftfanout
ftfanout
ixstats
partfilters
filtertypes
size
dynamic
cast
ixstats
runbuffersize
maxbytesperrun
sutil
starttimemeasurement
endif
totalpartiallists
0
string
tempdatafilename
getrandomfilename
tempdatafilename
cout
error
get
random
file
name
creating
runs
endl
return
fstream
fprunfile
disablestreambuffer
fprunfile
rdbuf
pubsetbuf
0
0
fprunfile
open
tempdatafilename
str
ios
ios
ios
trunc
ios
binary
build
empty
filtertree
buildhollowtreerecursive
filtertreeroot
0
vector
leaves
filtertreenode
getsubtreeleaves
filtertreeroot
leaves
filters
need
stringid2leafid
vector
map
tr1
unordered
map
leafaddr2leafid
filtertypes
size
0
stringid2leafid
resize
strcontainer
size
unsigned
0
leaves
size
unsigned
leafaddr
unsigned
leaves
leafaddr2leafid
leafaddr
buffer
inverted
lists
memory
indexer
duplicate
filter
tree
stringcontainervector
emptystrcontainer
ftindexermem
memindexer
emptystrcontainer
gramgen
maxstrlen
ftfanout
memindexer
buildindex
remember
number
elements
memindexer
unsigned
currentbytes
0
unsigned
numberruns
0
1
add
strings
memindexer
maxbytesperrun
reached
2
flush
memory
inverted
lists
disk
creating
run
3
merge
runs
create
final
index
4
specified
reorganize
index
reflect
partitioning
filter
timer
start
creating
runs
strcontainer
size
unsigned
0
strcontainer
size
string
currentstring
strcontainer
retrievestring
currentstring
gather
information
charsum
filtering
csfopts
csf
none
charsumstats
length
currentstring
size
charsumfilter
fillcharsumstats
currentstring
charsumstats
charsum
charsumstats
lchar
charsumstats
hchar
1
check
need
update
stringid2leaf
vector
filtertypes
size
0
unsigned
leafaddr
unsigned
findhomeleafnode
currentstring
stringid2leafid
leafaddr2leafid
leafaddr
unsigned
bytes
gramgen
getnumgrams
currentstring
invlist
elementsize
currentbytes
bytes
maxbytesperrun
flush
run
disk
clear
invertedlists
flushrun
memindexer
fprunfile
numberruns
memindexer
clearinvertedlists
currentbytes
0
addstringtomap
currentstring
insert
string
memory
indexer
stringrm
memindexer
insertstring
currentstring
currentbytes
bytes
timer
step
end
always
flush
last
run
flushrun
memindexer
fprunfile
numberruns
memindexer
clearinvertedlists
timer
stop
ifdef
debug
stat
sutil
stoptimemeasurement
dynamic
cast
ixstats
createrunstime
sutil
gettimemeasurement
sutil
starttimemeasurement
endif
using
filters
filtertypes
size
0
merge
runs
temporary
map
global
index
without
filters
grammap
tempmap
fstream
fpindex
disablestreambuffer
fpindex
rdbuf
pubsetbuf
0
0
scatteredorg
fpindex
open
scatter
tmp
ios
ios
ios
trunc
ios
binary
else
fpindex
open
invlistsfilename
str
ios
ios
ios
trunc
ios
binary
mergeruns
numberruns
tempmap
fprunfile
fpindex
fprunfile
close
ifdef
debug
stat
sutil
stoptimemeasurement
dynamic
cast
ixstats
mergerunstime
sutil
gettimemeasurement
sutil
starttimemeasurement
endif
reorganize
index
reflect
filters
used
reorganizeindex
tempmap
leaves
fpindex
scatter
sublists
scatteredorg
scatterindex
leaves
fpindex
fpindex
close
cleanup
tempmap
typename
grammap
iterator
iter
tempmap
begin
iter
tempmap
end
iter
delete
iter
second
ifdef
debug
stat
sutil
stoptimemeasurement
dynamic
cast
ixstats
reorgtime
sutil
gettimemeasurement
endif
else
using
partitioning
filter
just
merge
runs
fstream
fpindex
disablestreambuffer
fpindex
rdbuf
pubsetbuf
0
0
fpindex
open
invlistsfilename
str
ios
ios
ios
trunc
ios
binary
mergeruns
numberruns
filtertreeroot
children
0
node
grammap
fprunfile
fpindex
fpindex
close
fprunfile
close
ifdef
debug
stat
sutil
stoptimemeasurement
dynamic
cast
ixstats
mergerunstime
sutil
gettimemeasurement
dynamic
cast
ixstats
reorgtime
0
0
endif
cleanup
filtertypes
size
0
stringid2leafid
clear
totalgramlistsizes
clear
delete
temp
files
warning
os
dependent
know
delete
temp
file
means
char
cmd
tempdatafilename
size
5
sprintf
cmd
rm
tempdatafilename
str
int
system
cmd
scatteredorg
char
cmd
15
sprintf
cmd
rm
scatter
tmp
int
system
cmd
openinvlistsfile
ifdef
debug
stat
dynamic
cast
ixstats
indexsize
indexsize
ixstats
buildtime
dynamic
cast
ixstats
createrunstime
dynamic
cast
ixstats
mergerunstime
dynamic
cast
ixstats
reorgtime
endif
template
bool
ftindexerondisk
checkcorrectness
ftindexermem
memindexer
const
string
invlistsfilename
ifstream
fpin
fpin
open
invlistsfilename
str
ios
ios
binary
vector
memleaves
filtertreenode
getsubtreeleaves
memindexer
filtertreeroot
memleaves
vector
diskleaves
filtertreenode
getsubtreeleaves
filtertreeroot
diskleaves
memleaves
size
diskleaves
size
cout
number
leaves
equal
endl
return
false
unsigned
leaf
0
leaf
memleaves
size
leaf
filters
used
also
check
distinctstringids
filtertypes
size
0
gramlistondisk
diskleaves
leaf
distinctstringids
gramlistsimple
memleaves
leaf
distinctstringids
enter
lists
unequal
null
diskgl
null
memgl
null
check
lists
unequal
null
diskgl
null
memgl
null
diskgl
null
memgl
null
cout
error
comparing
distinctstringids
one
list
null
endl
cout
leaf
leaf
endl
return
false
check
size
lists
diskgl
listsize
memgl
getarray
size
cout
error
comparing
distinctstringids
lists
unequal
size
endl
cout
memlistsize
memgl
getarray
size
disklistsize
diskgl
listsize
endl
cout
leaf
leaf
endl
return
false
read
disklist
fpin
seekg
diskgl
startoffset
unsigned
bytes
diskgl
listsize
sizeof
unsigned
char
buffer
new
char
bytes
fpin
read
buffer
bytes
check
elements
unsigned
diskarr
unsigned
buffer
array
memarr
memgl
getarray
unsigned
0
diskgl
listsize
memarr
diskarr
cout
error
comparing
distinctstringids
unequal
elements
endl
cout
leaf
leaf
endl
unsigned
0
memarr
size
cout
memarr
diskarr
endl
return
false
delete
buffer
iterate
mem
lists
compare
disk
lists
typename
filtertreenode
grammap
memgrammap
memleaves
leaf
grammap
grammap
diskgrammap
diskleaves
leaf
grammap
typename
filtertreenode
grammap
iterator
iter
iter
memgrammap
begin
iter
memgrammap
end
iter
gramlist
gl
iter
second
invlist
memarr
gl
getarray
retrieve
disk
array
diskgrammap
find
iter
first
diskgrammap
end
cout
gram
list
endl
cout
leaf
leaf
endl
cout
gram
iter
first
endl
return
false
gramlistondisk
disklist
dynamic
cast
diskgrammap
iter
first
fpin
seekg
disklist
startoffset
unsigned
bytes
disklist
listsize
invlist
elementsize
char
buffer
new
char
bytes
fpin
read
buffer
bytes
disklist
listsize
memarr
size
cout
arrays
size
endl
cout
leaf
leaf
endl
cout
gram
iter
first
endl
cout
disklist
listsize
memarr
size
endl
return
false
typename
invlist
elementtype
diskarr
typename
invlist
elementtype
buffer
unsigned
0
memarr
size
compare
elements
memarr
diskarr
cout
failure
endl
cout
leaf
leaf
endl
cout
gram
iter
first
endl
unsigned
0
memarr
size
cout
memarr
diskarr
endl
return
false
delete
buffer
fpin
close
return
true
template
void
ftindexerondisk
flushrun
ftindexermem
memindexer
fstream
fpout
typename
filtertreenode
grammap
grammap
memindexer
filtertreeroot
children
0
node
grammap
typename
filtertreenode
grammap
iterator
iter
unsigned
numberpartiallists
grammap
size
totalpartiallists
numberpartiallists
fpout
write
const
char
numberpartiallists
sizeof
unsigned
iter
grammap
begin
iter
grammap
end
iter
unsigned
gramcode
iter
first
gramlist
gl
iter
second
invlist
arr
gl
getarray
fpout
write
const
char
gramcode
sizeof
unsigned
unsigned
size
arr
size
fpout
write
const
char
size
sizeof
unsigned
const
char
listdata
const
char
arr
begin
fpout
write
listdata
size
invlist
elementsize
totalgramlistsizes
find
gramcode
totalgramlistsizes
end
totalgramlistsizes
gramcode
size
else
totalgramlistsizes
gramcode
size
template
void
ftindexerondisk
mergeruns
unsigned
numberruns
grammap
targetmap
fstream
fpin
fstream
fpout
tr1
unordered
map
nextlistoffsets
streampos
nextoffset
0
next
offset
write
sublist
first
sublist
whole
list
create
empty
file
correct
size
remember
list
offsets
filters
activated
keep
space
every
distinct
stringid
beginning
file
stringids
will
ordered
written
reorganize
step
just
leave
space
filtertypes
size
0
unsigned
dummy
0
unsigned
0
strcontainer
size
fpout
write
const
char
dummy
sizeof
unsigned
nextoffset
fpout
tellp
create
rest
empty
file
holds
inverted
lists
tr1
unordered
map
iterator
iter
iter
totalgramlistsizes
begin
iter
totalgramlistsizes
end
iter
unsigned
bytes
iter
second
invlist
elementsize
char
dummy
new
char
bytes
memset
dummy
0
bytes
fpout
write
dummy
bytes
delete
dummy
indexsize
fpout
tellp
record
total
size
go
runs
create
final
index
fpin
seekg
0
timer
start
merging
runs
totalpartiallists
unsigned
run
0
run
numberruns
run
unsigned
numberpartiallists
fpin
read
char
numberpartiallists
sizeof
unsigned
buffer
lists
vector
partiallists
vector
completelists
partiallist
alllists
new
partiallist
numberpartiallists
read
partial
list
data
unsigned
list
0
list
numberpartiallists
list
fpin
read
char
alllists
list
gramcode
sizeof
unsigned
fpin
read
char
alllists
list
numberelements
sizeof
unsigned
unsigned
bytes
alllists
list
numberelements
invlist
elementsize
alllists
list
data
new
char
bytes
fpin
read
alllists
list
data
bytes
decide
vector
put
partial
list
alllists
list
numberelements
totalgramlistsizes
alllists
list
gramcode
completelists
push
back
alllists
list
else
partiallists
push
back
alllists
list
write
partial
lists
need
pay
random
ios
might
append
previously
written
sublist
unsigned
list
0
list
partiallists
size
list
partiallist
plist
partiallists
list
unsigned
gramcode
plist
gramcode
streampos
writeoffset
0
nextlistoffsets
find
gramcode
nextlistoffsets
end
writeoffset
nextoffset
nextoffset
totalgramlistsizes
gramcode
invlist
elementsize
targetmap
gramcode
new
gramlistondisk
totalgramlistsizes
gramcode
writeoffset
else
writeoffset
nextlistoffsets
gramcode
determine
list
size
bytes
seek
writing
position
unsigned
bytes
plist
numberelements
invlist
elementsize
fpout
seekp
writeoffset
fpout
write
plist
data
bytes
writeoffset
bytes
nextlistoffsets
gramcode
writeoffset
delete
plist
data
timer
step
write
complete
lists
one
sequential
write
fpout
seekp
nextoffset
unsigned
list
0
list
completelists
size
list
partiallist
clist
completelists
list
streampos
writeoffset
fpout
tellp
materialize
new
gramlistondisk
remember
size
starting
offset
inverted
list
targetmap
clist
gramcode
new
gramlistondisk
clist
numberelements
writeoffset
unsigned
bytes
clist
numberelements
invlist
elementsize
fpout
write
clist
data
bytes
delete
clist
data
timer
step
nextoffset
fpout
tellp
delete
alllists
timer
stop
required
filters
used
big
inverted
lists
split
several
sorted
sublists
reflecting
filters
used
must
remember
appropriate
offsets
set
filter
tree
leaves
template
void
ftindexerondisk
reorganizeindex
grammap
sourcemap
vector
leaves
fstream
fpindex
fpindex
seekp
0
fpindex
seekg
0
handle
distinctstringids
beginning
file
1
need
sort
distinctstringids
leafid
belong
2
need
create
gramlistondisk
instance
every
leaf
least
one
stringid
3
need
set
size
starting
offset
sorted
sublist
distinctstringids
one
leaf
unsigned
distinctids
new
unsigned
strcontainer
size
unsigned
0
strcontainer
size
distinctids
invlistspecializer
stringid2leafid
stringid2leafid
qsort
distinctids
strcontainer
size
sizeof
unsigned
invlistspecializer
cmp
fpindex
write
const
char
distinctids
strcontainer
size
sizeof
unsigned
fpindex
clear
update
offsets
filtertree
leaves
unsigned
sortedsublistsize
1
streampos
sortedsublistoffset
0
always
start
beginning
file
unsigned
prevleaf
stringid2leafid
distinctids
0
set
first
value
unsigned
1
strcontainer
size
unsigned
currentleaf
stringid2leafid
distinctids
currentleaf
prevleaf
update
grammap
appropriate
leaf
leaves
prevleaf
distinctstringids
new
gramlistondisk
sortedsublistsize
sortedsublistoffset
prevleaf
currentleaf
sortedsublistsize
1
sortedsublistoffset
streampos
sizeof
unsigned
else
sortedsublistsize
leaves
prevleaf
distinctstringids
new
gramlistondisk
sortedsublistsize
sortedsublistoffset
delete
distinctids
want
read
file
sequentially
must
sort
gramlistondisks
startoffset
vector
sortedgramlists
typename
grammap
iterator
iter
sourcemap
begin
iter
sourcemap
end
iter
gramlistondiskpair
first
iter
first
second
dynamic
cast
iter
second
sortedgramlists
push
back
sort
sortedgramlists
begin
sortedgramlists
end
ftindexerondisk
cmpgramlistondiskpair
sequentially
read
every
list
reorganize
list
determine
offsets
filtertree
leaves
write
modified
lists
buffer
space
exceeded
least
one
complete
list
must
read
though
unsigned
currentbytes
0
streampos
nextwriteoffset
streampos
strcontainer
size
sizeof
unsigned
fpindex
seekp
nextwriteoffset
fpindex
seekg
nextwriteoffset
vector
datatoflush
timer
start
reorganizing
index
sortedgramlists
size
unsigned
0
sortedgramlists
size
gramlistondiskpair
currentpair
sortedgramlists
gramlistondisk
gl
currentpair
second
check
exceeded
available
memory
unsigned
bytes
gl
listsize
invlist
elementsize
currentbytes
bytes
maxbytesperrun
reorganizeindexflush
datatoflush
fpindex
nextwriteoffset
currentbytes
0
nextwriteoffset
fpindex
tellp
fpindex
seekg
gl
startoffset
pair
writeme
first
points
fo
data
second
indicates
data
size
bytes
writeme
second
gl
listsize
invlist
elementsize
writeme
first
new
char
writeme
second
fpindex
read
writeme
first
writeme
second
sort
inverted
list
leafid
stringid
belongs
filtertree
filters
reason
unknown
stl
sort
function
handle
snippet
unsigned
begin
unsigned
writeme
first
unsigned
end
begin
gl
listsize
sort
begin
end
ftindexerondisk
cmpinvlistelements
invlistspecializer
stringid2leafid
stringid2leafid
qsort
void
writeme
first
gl
listsize
invlist
elementsize
invlistspecializer
cmp
update
offsets
filter
tree
leaf
nodes
function
specialized
type
inverted
list
invlistspecializer
updateleafoffsets
currentpair
writeme
gl
leaves
datatoflush
push
back
writeme
currentbytes
bytes
timer
step
reorganizeindexflush
datatoflush
fpindex
nextwriteoffset
timer
stop
template
void
ftindexerondisk
reorganizeindexflush
vector
datatoflush
fstream
fpindex
streampos
nextwriteoffset
flush
pending
data
disk
fpindex
seekp
nextwriteoffset
unsigned
0
datatoflush
size
pair
datatoflush
fpindex
write
first
second
delete
first
datatoflush
clear
fpindex
clear
template
void
ftindexerondisk
scatterindex
vector
leaves
fstream
srcindex
fstream
fpindex
disablestreambuffer
fpindex
rdbuf
pubsetbuf
0
0
fpindex
open
invlistsfilename
str
ios
ios
ios
trunc
ios
binary
read
write
distinctstringids
beginning
file
char
distinctids
new
char
strcontainer
size
sizeof
unsigned
srcindex
seekg
0
srcindex
read
distinctids
strcontainer
size
sizeof
unsigned
fpindex
seekp
0
fpindex
write
distinctids
strcontainer
size
sizeof
unsigned
delete
distinctids
create
empty
file
right
size
unsigned
bigwrites
indexsize
maxbytesperrun
unsigned
lastwritesize
indexsize
maxbytesperrun
unsigned
0
bigwrites
char
data
new
char
maxbytesperrun
fpindex
write
const
char
data
maxbytesperrun
delete
data
char
data
new
char
lastwritesize
fpindex
write
const
char
data
lastwritesize
delete
data
randomly
sort
leaves
sort
leaves
begin
leaves
end
ftindexerondisk
randcmpfiltertreenode
count
lists
process
monitoring
progress
unsigned
liststoprocess
0
unsigned
0
leaves
size
liststoprocess
leaves
grammap
size
char
buffer
new
char
maxbytesperrun
unsigned
currentbytes
0
fpindex
seekp
strcontainer
size
sizeof
unsigned
timer
start
scattering
index
liststoprocess
unsigned
0
leaves
size
grammap
grammap
leaves
grammap
typename
grammap
iterator
iter
grammap
begin
iter
grammap
end
iter
gramlistondisk
gl
static
cast
iter
second
unsigned
bytes
gl
listsize
invlist
elementsize
currentbytes
bytes
maxbytesperrun
flush
sublists
disk
fpindex
write
buffer
currentbytes
currentbytes
0
srcindex
seekg
gl
startoffset
srcindex
read
buffer
currentbytes
bytes
gl
startoffset
fpindex
tellp
streampos
currentbytes
currentbytes
bytes
timer
step
currentbytes
0
fpindex
write
buffer
currentbytes
currentbytes
0
timer
stop
delete
buffer
fpindex
close
template
filtertreenode
ftindexerondisk
findhomeleafnode
const
string
filtertreenode
currentnode
filtertreeroot
position
currentnode
appropriate
leaf
node
filter
tree
unsigned
filterid
0
filterid
filtertypes
size
filterid
unsigned
key
filtertypes
filterid
getkey
keynodepair
knp
key
null
typename
vector
iterator
iter
lower
bound
currentnode
children
begin
currentnode
children
end
knp
iter
currentnode
children
end
currentnode
iter
node
return
currentnode
endif

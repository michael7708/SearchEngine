
topkheap v1 
id
topkheap
v1
4810
2009
12
03
00
26
44z
rares
copyright
2007
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
02
20
2008
author
rares
vernica
ifndef
topkheap
v1
define
topkheap
v1
include
include
topkindex
include
topkindex
v1
include
topkheap
include
foreign
listmerger
extern
float
heap
c1
namespace
topk
namespace
heap
v1
struct
setnooperation
void
find
uint
return
0
void
end
return
0
void
sortlistsbysize
const
std
vector
alllists
const
uint
const
pointersindex
uint
sortedindex
template
void
insertheap
uint
dataheap
uint
indexheap
uint
heapsize
const
std
vector
lists
uint
pointersindexlist
uint
vectorindexcontainer
uint
containersize
randomaccessiterator
weights
float
whtmin
uint
0
iat
position
newdata
0u
weights
newdata
whtmin
newdata
0
heapinsert
newdata
index
dataheap
indexheap
heapsize
end
end
insertheap
template
void
makeheap
const
std
vector
lists
const
uint
const
pointersindex
const
bool
const
longlistmask
uint
dataheap
uint
indexheap
uint
size
randomaccessiterator
weights
float
whtmin
size
0
uint
0
lists
size
longlistmask
uint
lists
pointersindex
0u
weights
whtmin
0
heapinsert
dataheap
indexheap
size
end
end
makeheap
template
class
randomaccessiterator1
class
randomaccessiterator2
class
set
void
dodivideskip
const
randomaccessiterator1
data
const
randomaccessiterator2
weights
const
index
v1
idx
const
query
que
const
indexquery
v1
idxque
cand
topkbuf
set
checked
float
simmaxpossible
1
float
whtminneeded
std
numeric
limits
min
uint
thresholdminneeded
1
uint
thresholdchecked
std
numeric
limits
max
const
uint
maxunsigned
0
const
uint
numberofinvertedlist
idxque
size
const
uint
batchthreshold
10
const
uint
batchlonglists
3
const
uint
thresholdmax
std
min
thresholdchecked
1
numberofinvertedlist
uint
threshold
thresholdminneeded
uint
longlistssize
0
longlistssizenew
uint
pointersindex
new
uint
numberofinvertedlist
memset
pointersindex
0
sizeof
uint
numberofinvertedlist
uint
sortedindex
new
uint
numberofinvertedlist
sortlistsbysize
idxque
pointersindex
sortedindex
uint
longestsize
idxque
sortedindex
numberofinvertedlist
1
size
bool
longlistmask
new
bool
numberofinvertedlist
memset
longlistmask
0
sizeof
bool
numberofinvertedlist
addmaxunsigned2eachlist
idxque
maxunsigned
uint
dataheap
uint
indexheap
dataheap
new
uint
numberofinvertedlist
indexheap
new
uint
numberofinvertedlist
uint
sizeofheaps
makeheap
idxque
pointersindex
longlistmask
dataheap
indexheap
sizeofheaps
weights
whtminneeded
container
vector
indexes
moved
next
position
uint
vectorindexcontainer
vectorindexcontainer
new
uint
numberofinvertedlist
uint
containersize
0
uint
iteration
0
dataheap
0
maxunsigned
check
can
get
result
containersize
0
uint
mindata
dataheap
0
mindata
dataheap
0
containersize
numberofinvertedlist
longlistssize
vectorindexcontainer
containersize
indexheap
0
heapdelete
dataheap
indexheap
sizeofheaps
end
containersize
threshold
longlistssize
got
result
uint
freq
containersize
freq
threshold
lookup
long
lists
uint
0
numberofinvertedlist
longlistmask
weights
pointersindex
whtminneeded
uint
pos
idxque
binarysearch
mindata
pointersindex
pointersindex
pos
pos
idxque
size
idxque
pos
mindata
freq
freq
threshold
checked
find
mindata
checked
end
good
result
uint
id
mindata
float
sc
score
que
sim
que
str
data
id
weights
id
sc
topkbuf
0
score
std
pop
heap
topkbuf
topkbuf
que
topkbuf
que
1
cand
id
sc
std
push
heap
topkbuf
topkbuf
que
whtminneeded
scoreinversewht
topkbuf
0
score
simmaxpossible
recompute
threshold
topkbuf
0
score
std
numeric
limits
min
iteration
batchthreshold
0
float
whtmaxfront
weights
mindata
threshold
que
sim
getnogramsmin
que
len
idx
nogramsmin
que
nograms
scoreinversesim
topkbuf
0
score
whtmaxfront
threshold
thresholdmax
break
whtminneeded
whtmaxfront
break
longlistssizenew
threshold
1
longlistssizenew
static
cast
floor
threshold
topk
heap
nlongparam
log2
longestsize
1
longlistssizenew
longlistssize
longlistssizenew
longlistssize
batchlonglists
move
pointersindex
popped
lists
resort
lists
length
set
longlistmask
longlistssizenew
longest
lists
create
new
heap
heads
non
long
lists
continue
uint
0
containersize
uint
vectorindexcontainer
pointersindex
end
sortlistsbysize
idxque
pointersindex
sortedindex
longestsize
idxque
sortedindex
numberofinvertedlist
1
size
memset
longlistmask
0
sizeof
bool
numberofinvertedlist
uint
numberofinvertedlist
longlistssizenew
numberofinvertedlist
longlistmask
sortedindex
true
makeheap
idxque
pointersindex
longlistmask
dataheap
indexheap
sizeofheaps
weights
whtminneeded
longlistssize
longlistssizenew
continue
move
next
element
uint
0
containersize
uint
vectorindexcontainer
pointersindex
end
insertheap
dataheap
indexheap
sizeofheaps
idxque
pointersindex
vectorindexcontainer
containersize
weights
whtminneeded
continue
end
freq
threshold
pop
elements
heap
skip
nodes
containersize
threshold
1
longlistssize
vectorindexcontainer
containersize
indexheap
0
heapdelete
dataheap
indexheap
sizeofheaps
end
skipnodes
idxque
vectorindexcontainer
containersize
dataheap
0
pointersindex
insertheap
dataheap
indexheap
sizeofheaps
idxque
pointersindex
vectorindexcontainer
containersize
weights
whtminneeded
end
thresholdheap
0
max
delete
dataheap
delete
indexheap
delete
vectorindexcontainer
delete
pointersindex
delete
sortedindex
delete
longlistmask
deletemaxunsignedfromeachlist
idxque
template
class
randomaccessiterator1
class
randomaccessiterator2
class
outputiterator
void
gettopk
const
randomaccessiterator1
data
const
randomaccessiterator2
weights
const
index
v1
idx
const
query
que
const
indexquery
v1
idxque
outputiterator
topk
cand
topkbuf
new
cand
que
std
fill
topkbuf
topkbuf
que
cand
setnooperation
checked
dodivideskip
data
weights
idx
que
idxque
topkbuf
checked
std
sort
heap
topkbuf
topkbuf
que
uint
0
que
topk
topkbuf
id
delete
topkbuf
endif

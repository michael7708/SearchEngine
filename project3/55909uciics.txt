
ftindexerdiscardlists 
id
ftindexerdiscardlists
5788
2010
10
22
10
09
57z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
academic
bsd
license
date
12
27
2007
author
alexander
behm
ifndef
ftindexerdiscardlists
define
ftindexerdiscardlists
include
ftindexermemabs
include
ftindexermem
include
common
src
simmetric
include
listmerger
src
divideskipmerger
struct
valpair
unsigned
gramcode
unsigned
listsize
struct
valpaircmpfunc
bool
operator
const
valpair
vp1
const
valpair
vp2
const
return
vp1
listsize
vp2
listsize
template
class
ftindexerdiscardlistsabs
template
struct
ftindexertraits
typedef
ftindexertraits
traitstype
typedef
typename
traitstype
stringcontainer
stringcontainer
typedef
typename
traitstype
invlist
invlist
template
class
ftindexerdiscardlistsabs
public
ftindexermemabs
public
typedef
ftindexertraits
traitstype
typedef
typename
traitstype
stringcontainer
stringcontainer
typedef
typename
traitstype
invlist
invlist
ifdef
debug
stat
typedef
holesglobalindexstats
ixstatstype
endif
private
typedef
ftindexermemabs
superclass
protected
typedef
typename
superclass
grammap
grammap
float
reductionratio
set
holegrams
bool
duplicategram
const
unsigned
gramcode
const
vector
gramcodes
const
unsigned
iterstep
void
fillstructsforholes
set
orderedgramset
unordered
map
countmap
long
unsigned
totallistelements
void
saveholegrams
ofstream
fpout
void
loadholegrams
ifstream
fpin
public
ftindexerdiscardlistsabs
stringcontainer
strcontainer
superclass
strcontainer
ifdef
debug
stat
ixstats
new
holesglobalindexstats
endif
ftindexerdiscardlistsabs
stringcontainer
strcontainer
gramgen
gramgenerator
float
reductionratio
unsigned
maxstrlen
150
unsigned
ftfanout
50
superclass
strcontainer
gramgenerator
maxstrlen
ftfanout
reductionratio
reductionratio
ifdef
debug
stat
ixstats
new
holesglobalindexstats
dynamic
cast
ixstats
reductionratio
reductionratio
endif
statically
delegate
prepare
implementation
appropriate
subclass
void
prepare
impl
static
cast
chooseholegrams
void
addstringid
impl
filtertreenode
leaf
const
vector
gramcodes
unsigned
stringid
compressionargs
getcompressionargs
impl
string
getname
return
ftindexerdiscardlistsabs
void
saveindex
impl
const
char
indexfilename
void
loadindex
impl
const
char
indexfilename
template
bool
ftindexerdiscardlistsabs
duplicategram
const
unsigned
gramcode
const
vector
gramcodes
const
unsigned
iterstep
signed
signed
iterstep
1
0
0
gramcode
gramcodes
return
true
return
false
template
void
ftindexerdiscardlistsabs
fillstructsforholes
set
orderedgramset
unordered
map
countmap
long
unsigned
totallistelements
unsigned
long
tmptotallistelements
0
compute
gram
counts
unsigned
stringid
0
stringid
strcontainer
size
stringid
vector
gramcodes
string
currentstring
strcontainer
retrievestring
currentstring
stringid
gramgen
decompose
currentstring
gramcodes
unsigned
0
gramcodes
size
unsigned
gramcode
gramcodes
duplicategram
gramcode
gramcodes
countmap
find
gramcode
countmap
end
countmap
gramcode
1
else
countmap
gramcode
tmptotallistelements
create
set
ordered
descending
listsize
unordered
map
iterator
iter
countmap
begin
iter
countmap
end
iter
struct
valpair
vp
vp
gramcode
iter
first
vp
listsize
iter
second
orderedgramset
insert
vp
totallistelements
tmptotallistelements
template
void
ftindexerdiscardlistsabs
addstringid
impl
filtertreenode
leaf
const
vector
gramcodes
unsigned
stringid
unsigned
0
gramcodes
size
unsigned
gramcode
gramcodes
ignore
grams
set
holegrams
holegrams
find
gramcode
holegrams
end
continue
grammap
grammap
leaf
grammap
grammap
find
gramcode
grammap
end
new
gram
gramlist
newgramlist
new
gramlistsimple
grammap
gramcode
newgramlist
invlist
array
newgramlist
getarray
array
push
back
stringid
else
existing
gram
gramlist
gramlist
grammap
gramcode
invlist
array
gramlist
getarray
avoid
adding
duplicate
elements
array
back
stringid
array
push
back
stringid
template
compressionargs
ftindexerdiscardlistsabs
getcompressionargs
impl
compressionargs
blacklist
holegrams
compressionargs
holesoptimized
true
return
compressionargs
template
void
ftindexerdiscardlistsabs
saveholegrams
ofstream
fpout
unsigned
holegrams
size
fpout
write
const
char
sizeof
unsigned
set
iterator
iter
holegrams
begin
iter
holegrams
end
iter
iter
fpout
write
const
char
sizeof
unsigned
template
void
ftindexerdiscardlistsabs
loadholegrams
ifstream
fpin
unsigned
ngrams
unsigned
fpin
read
char
ngrams
sizeof
unsigned
unsigned
0
ngrams
fpin
read
char
sizeof
unsigned
holegrams
insert
template
void
ftindexerdiscardlistsabs
saveindex
impl
const
char
indexfilename
ofstream
fpout
fpout
open
indexfilename
ios
fpout
open
savebasicinfo
fpout
saveleavesrec
filtertreeroot
fpout
saveholegrams
fpout
fpout
close
else
cout
error
open
file
indexfilename
endl
template
void
ftindexerdiscardlistsabs
loadindex
impl
const
char
indexfilename
ifstream
fpin
fpin
open
indexfilename
ios
fpin
open
filtertypes
clear
loadbasicinfo
fpin
buildhollowtreerecursive
filtertreeroot
0
loadleavesrec
filtertreeroot
fpin
loadholegrams
fpin
fpin
close
else
cout
error
open
file
indexfilename
endl
template
class
ftindexerdiscardlistsllf
template
struct
ftindexertraits
typedef
tstringcontainer
stringcontainer
typedef
tinvlist
invlist
template
class
ftindexerdiscardlistsllf
public
ftindexerdiscardlistsabs
private
typedef
ftindexerdiscardlistsabs
superclass
public
ftindexerdiscardlistsllf
stringcontainer
strcontainer
superclass
strcontainer
ftindexerdiscardlistsllf
stringcontainer
strcontainer
gramgen
gramgen
float
reductionratio
unsigned
maxstrlength
150
unsigned
ftfanout
50
superclass
strcontainer
gramgen
reductionratio
maxstrlength
ftfanout
indexertype
holes
global
llf
void
chooseholegrams
string
getname
return
ftindexerdiscardlistsllf
template
void
ftindexerdiscardlistsllf
chooseholegrams
set
orderedgramset
unordered
map
countmap
unsigned
long
totallistelements
0
fillstructsforholes
orderedgramset
countmap
totallistelements
create
gram
blacklist
grams
holes
unsigned
long
memmax
unsigned
long
totallistelements
reductionratio
unsigned
memsum
0
set
iterator
iter
orderedgramset
begin
memsum
memmax
iter
orderedgramset
end
memsum
iter
listsize
holegrams
insert
iter
gramcode
iter
ifdef
debug
stat
dynamic
cast
ixstats
numberholes
holegrams
size
endif
template
class
ftindexerdiscardlistsslf
template
struct
ftindexertraits
typedef
tstringcontainer
stringcontainer
typedef
tinvlist
invlist
template
class
ftindexerdiscardlistsslf
public
ftindexerdiscardlistsabs
private
typedef
ftindexerdiscardlistsabs
superclass
public
ftindexerdiscardlistsslf
stringcontainer
strcontainer
superclass
strcontainer
ftindexerdiscardlistsslf
stringcontainer
strcontainer
gramgen
gramgen
float
reductionratio
unsigned
maxstrlength
150
unsigned
ftfanout
50
superclass
strcontainer
gramgen
reductionratio
maxstrlength
ftfanout
indexertype
holes
global
slf
void
chooseholegrams
string
getname
return
ftindexerdiscardlistsslf
template
void
ftindexerdiscardlistsslf
chooseholegrams
set
orderedgramset
unordered
map
countmap
unsigned
long
totallistelements
0
fillstructsforholes
orderedgramset
countmap
totallistelements
create
gram
blacklist
grams
holes
unsigned
long
memmax
unsigned
long
totallistelements
reductionratio
unsigned
memsum
0
set
reverse
iterator
iter
orderedgramset
rbegin
memsum
memmax
iter
orderedgramset
rend
memsum
iter
listsize
holegrams
insert
iter
gramcode
iter
ifdef
debug
stat
dynamic
cast
ixstats
numberholes
holegrams
size
endif
template
class
ftindexerdiscardlistsrandom
template
struct
ftindexertraits
typedef
tstringcontainer
stringcontainer
typedef
tinvlist
invlist
template
class
ftindexerdiscardlistsrandom
public
ftindexerdiscardlistsabs
private
typedef
ftindexerdiscardlistsabs
superclass
public
ftindexerdiscardlistsrandom
stringcontainer
strcontainer
superclass
strcontainer
ftindexerdiscardlistsrandom
stringcontainer
strcontainer
gramgen
gramgen
float
reductionratio
unsigned
maxstrlength
150
unsigned
ftfanout
50
superclass
strcontainer
gramgen
reductionratio
maxstrlength
ftfanout
indexertype
holes
global
random
void
chooseholegrams
string
getname
return
ftindexerdiscardlistsrandom
template
void
ftindexerdiscardlistsrandom
chooseholegrams
set
orderedgramset
unordered
map
countmap
unsigned
long
totallistelements
0
fillstructsforholes
orderedgramset
countmap
totallistelements
create
gram
blacklist
grams
holes
unsigned
long
memmax
unsigned
long
totallistelements
reductionratio
unsigned
memsum
0
memsum
memmax
orderedgramset
size
0
unsigned
rand
random
orderedgramset
size
unsigned
iterfind
0
set
iterator
iter
orderedgramset
begin
iterfind
rand
iter
iterfind
memsum
iter
listsize
holegrams
insert
iter
gramcode
orderedgramset
erase
iter
ifdef
debug
stat
dynamic
cast
ixstats
numberholes
holegrams
size
endif
used
cost
based
hole
choosers
typedef
struct
unsigned
length
vector
gramcodes
char
holes
unsigned
originalcandidates
vector
scancounts
vector
nonzeroscancounts
unsigned
paniccost
unsigned
originalthreshold
vector
affectedleaves
unordered
map
gramoccur
bool
ispanic
queryinfo
template
class
ftindexerdiscardlistscostabs
template
struct
ftindexertraits
typedef
ftindexertraits
traitstype
typedef
typename
traitstype
stringcontainer
stringcontainer
typedef
typename
traitstype
invlist
invlist
template
class
ftindexerdiscardlistscostabs
public
ftindexerdiscardlistsabs
public
typedef
ftindexertraits
traitstype
typedef
typename
traitstype
stringcontainer
stringcontainer
typedef
typename
traitstype
invlist
invlist
private
typedef
ftindexerdiscardlistsabs
superclass
protected
typedef
typename
superclass
grammap
grammap
const
vector
workload
const
simmetric
simmetric
float
simthreshold
bool
ratiocost
float
dictsamplingfrac
float
queriessamplingfrac
void
fillsamplesets
const
bool
truerand
vector
dictsampleset
vector
queriessampleset
bool
cleanseorderedgramset
const
unsigned
long
totalelements
const
unsigned
numberlists
set
orderedgramset
void
getfiltertreeleaves
const
ftindexermem
node
const
string
query
const
vector
filtertypes
const
unsigned
filterid
vector
leaves
unsigned
initscancountarray
const
vector
arrays
const
unsigned
threshold
const
unsigned
arraysize
unsigned
scancountarray
void
fillqueryinfo
const
ftindexermem
queriessampleset
const
unsigned
dictsize
queryinfo
queryinfo
unsigned
totalmergeelements
unsigned
totalcandidates
unsigned
totalpaniccandidates
void
freequeryinfo
queryinfo
queryinfo
const
unsigned
size
public
ftindexerdiscardlistscostabs
stringcontainer
strcontainer
superclass
strcontainer
ftindexerdiscardlistscostabs
stringcontainer
strcontainer
gramgen
gramgen
float
reductionratio
const
vector
workload
const
simmetric
simmetric
float
simthreshold
bool
ratiocost
true
float
dictsamplingfrac
0
01f
float
queriessamplingfrac
0
25f
unsigned
maxstrlen
150
unsigned
ftfanout
50
superclass
strcontainer
gramgen
reductionratio
maxstrlen
ftfanout
workload
workload
simmetric
simmetric
simthreshold
simthreshold
ratiocost
ratiocost
dictsamplingfrac
dictsamplingfrac
queriessamplingfrac
queriessamplingfrac
statically
delegate
chooseholegrams
method
appropriate
subclass
void
chooseholegrams
static
cast
chooseholegrams
cost
template
void
ftindexerdiscardlistscostabs
fillsamplesets
const
bool
truerand
vector
dictsampleset
vector
queriessampleset
truerand
srand
time
null
else
srand
150
choose
dictionary
sample
dictsamplingfrac
1
0
unsigned
dictsamplestrings
unsigned
ceil
float
strcontainer
size
dictsamplingfrac
unsigned
0
dictsamplestrings
unsigned
stringindex
rand
strcontainer
size
string
currentstring
strcontainer
retrievestring
currentstring
stringindex
dictsampleset
push
back
currentstring
else
unsigned
0
strcontainer
size
string
currentstring
strcontainer
retrievestring
currentstring
dictsampleset
push
back
currentstring
choose
queries
queriessamplingfrac
1
0
unsigned
queriessamplestrings
unsigned
floor
float
workload
size
queriessamplingfrac
unsigned
0
queriessamplestrings
unsigned
stringindex
rand
workload
size
queriessampleset
push
back
workload
stringindex
else
unsigned
0
workload
size
queriessampleset
push
back
workload
template
bool
ftindexerdiscardlistscostabs
cleanseorderedgramset
const
unsigned
long
totalelements
const
unsigned
numberlists
set
orderedgramset
set
iterator
del
bool
found
false
unsigned
avglistsize
unsigned
floor
double
totalelements
double
numberlists
unsigned
threshold
avglistsize
unsigned
long
sum
0
unsigned
long
memmax
unsigned
long
totalelements
reductionratio
set
iterator
iter
orderedgramset
begin
iter
orderedgramset
end
iter
sum
iter
listsize
iter
listsize
memmax
del
iter
found
true
break
found
orderedgramset
erase
del
orderedgramset
end
return
true
else
return
false
template
void
ftindexerdiscardlistscostabs
getfiltertreeleaves
const
ftindexermem
node
const
string
query
const
vector
filtertypes
const
unsigned
filterid
vector
leaves
case
filters
selected
just
add
leaf
root
filtertypes
size
0
leaves
push
back
node
return
node
isleaf
leaves
push
back
filtertreenode
node
else
abstractfilter
filter
filtertypes
filterid
get
bounds
filter
unsigned
lbound
ubound
simmetric
getfilterbounds
query
simthreshold
filter
lbound
ubound
vector
children
node
children
nodelbound
nodeubound
denote
upper
lower
bound
node
looking
unsigned
nodelbound
nodeubound
nodelbound
filter
getfilterlbound
children
check
need
recurse
unsigned
0
children
size
selectively
recurse
children
recurse
nodes
overlap
lbound
ubound
nodeubound
children
key
lbound
nodelbound
getfiltertreeleaves
ftindexer
children
node
query
filtertypes
filterid
1
leaves
nodelbound
nodeubound
template
unsigned
ftindexerdiscardlistscostabs
initscancountarray
const
vector
arrays
const
unsigned
threshold
const
unsigned
arraysize
unsigned
scancountarray
unsigned
resultsize
0
unsigned
0
arrays
unsigned
0
jsize
unsigned
id
scancountarray
id
scancountarray
id
threshold
resultsize
return
resultsize
template
void
ftindexerdiscardlistscostabs
fillqueryinfo
const
ftindexermem
queriessampleset
const
unsigned
dictsize
queryinfo
queryinfo
unsigned
totalmergeelements
unsigned
totalcandidates
unsigned
totalpaniccandidates
totalmergeelements
0
totalcandidates
0
totalpaniccandidates
0
unsigned
0
queriessampleset
size
string
currentstring
queriessampleset
fill
gram
occurences
gramgen
decompose
currentstring
queryinfo
gramcodes
unsigned
0
queryinfo
gramcodes
size
unsigned
gramcode
queryinfo
gramcodes
unordered
map
map
queryinfo
gramoccur
map
find
gramcode
map
end
map
gramcode
1
else
map
gramcode
queryinfo
length
currentstring
size
queryinfo
holes
0
queryinfo
originalthreshold
simmetric
getmergethreshold
currentstring
simthreshold
unsigned
0
getfiltertreeleaves
sampleindexer
sampleindexer
filtertreeroot
currentstring
filtertypes
0
queryinfo
affectedleaves
unsigned
nleaves
queryinfo
affectedleaves
size
init
array
nonzeroscancounts
queryinfo
nonzeroscancounts
new
vector
nleaves
queryinfo
paniccost
0
queryinfo
ispanic
false
queryinfo
originalcandidates
0
unsigned
0
nleaves
filtertreenode
leaf
queryinfo
affectedleaves
unsigned
newscancount
new
unsigned
dictsize
memset
newscancount
0
dictsize
sizeof
unsigned
queryinfo
scancounts
push
back
newscancount
vector
invertedlists
leaf
getinvertedlists
currentstring
gramgen
invertedlists
fill
panic
cost
leaf
distinctstringids
queryinfo
paniccost
leaf
distinctstringids
getarray
size
query
panics
set
flag
signed
queryinfo
originalthreshold
distinctstringids
totalpaniccandidates
leaf
distinctstringids
getarray
size
else
get
costs
merge
postprocess
queryinfo
originalcandidates
initscancountarray
invertedlists
queryinfo
originalthreshold
queriessampleset
size
queryinfo
scancounts
fill
nonzeroscancount
unsigned
arr
queryinfo
scancounts
vector
nonzeroscancounts
queryinfo
nonzeroscancounts
unsigned
0
dictsize
arr
0
nonzeroscancounts
push
back
arr
unsigned
0
invertedlists
size
totalmergeelements
invertedlists
size
sanity
check
queryinfo
originalcandidates
queryinfo
paniccost
cout
insane
queryinfo
originalcandidates
queryinfo
paniccost
endl
totalcandidates
queryinfo
originalcandidates
template
void
ftindexerdiscardlistscostabs
freequeryinfo
queryinfo
queryinfo
const
unsigned
size
unsigned
0
size
unsigned
scancountsize
queryinfo
scancounts
size
unsigned
0
scancountsize
unsigned
scancountarr
queryinfo
scancounts
scancountarr
delete
scancountarr
vector
nonzeroscancounts
queryinfo
nonzeroscancounts
nonzeroscancounts
delete
nonzeroscancounts
template
class
ftindexerdiscardliststimecost
template
struct
ftindexertraits
typedef
tstringcontainer
stringcontainer
typedef
tinvlist
invlist
template
class
ftindexerdiscardliststimecost
public
ftindexerdiscardlistscostabs
private
typedef
ftindexerdiscardlistscostabs
superclass
protected
typedef
typename
superclass
grammap
grammap
float
avgpostprocesstime
float
avgmergetime
void
estimateavgpostprocesstime
const
vector
dictsampleset
const
vector
queriessampleset
const
queryinfo
queryinfo
const
unsigned
iterations
void
estimateavgmergetime
const
vector
dictsampleset
const
vector
queriessampleset
const
queryinfo
queryinfo
const
unsigned
iterations
inline
float
getapproxpostprocesstime
const
unsigned
totalcandidates
return
avgpostprocesstime
float
totalcandidates
inline
float
getapproxmergetime
const
unsigned
totalelements
return
avgmergetime
float
totalelements
unsigned
choosegram
set
orderedgramset
const
vector
queriessampleset
const
vector
dictsampleset
grammap
queriesmap
queryinfo
queryinfo
unsigned
totalmergeelements
unsigned
totalcandidates
unsigned
totalpaniccandidates
unsigned
long
memsum
float
bestratio
unsigned
calculatenewcandidates
const
string
query
const
unsigned
threshold
const
unsigned
holeoccur
const
unsigned
arraysize
const
vector
nonzeroscancounts
const
vector
affectedstrings
const
bool
makepermanent
unsigned
scancountarray
void
simulatehole
const
bool
makepermanent
const
unsigned
hole
const
unsigned
dictsize
const
vector
queriessampleset
grammap
queriesmap
queryinfo
queryinfo
unsigned
oldtotalmergeelements
unsigned
oldtotalcandidates
unsigned
oldtotalpaniccandidates
unsigned
newtotalmergeelements
unsigned
newtotalcandidates
unsigned
newtotalpaniccandidates
public
ftindexerdiscardliststimecost
stringcontainer
strcontainer
superclass
strcontainer
ftindexerdiscardliststimecost
stringcontainer
strcontainer
gramgen
gramgen
const
float
reductionratio
const
vector
workload
const
simmetric
simmetric
const
float
simthreshold
const
bool
ratiocost
false
const
float
dictsamplingfrac
0
01f
const
float
queriessamplingfrac
0
25f
const
unsigned
maxstrlen
150
const
unsigned
ftfanout
50
superclass
strcontainer
gramgen
reductionratio
workload
simmetric
simthreshold
ratiocost
dictsamplingfrac
queriessamplingfrac
maxstrlen
ftfanout
avgpostprocesstime
0
0f
avgmergetime
0
0f
indexertype
holes
global
timecost
void
chooseholegrams
cost
string
getname
return
ftindexerdiscardliststimecost
template
void
ftindexerdiscardliststimecost
estimateavgpostprocesstime
const
vector
dictsampleset
const
vector
queriessampleset
const
queryinfo
queryinfo
const
unsigned
iterations
statsutil
sutil
srand
150
float
totaltime
0
0
unsigned
counter
0
unsigned
rep
2
reason
estimation
sometimes
much
better
one
unsigned
0
iterations
unsigned
rand
queriessampleset
size
string
querystring
queriessampleset
sutil
starttimemeasurement
distancemeasure
similar
querystring
querystring
sutil
stoptimemeasurement
totaltime
sutil
gettimemeasurement
tfmsec
counter
unsigned
0
rep
unsigned
0
queriessampleset
size
unsigned
unsigned
0
queryinfo
affectedleaves
size
filtertreenodedistinctstringids
continue
invlist
distinctids
leaf
distinctstringids
getarray
unsigned
0
distinctids
size
string
querystring
queriessampleset
string
dictstring
dictsampleset
distinctids
sutil
starttimemeasurement
simmetric
dictstring
querystring
sutil
stoptimemeasurement
totaltime
sutil
gettimemeasurement
tfmsec
counter
avgpostprocesstime
totaltime
float
counter
template
void
ftindexerdiscardliststimecost
estimateavgmergetime
const
vector
dictsampleset
const
vector
queriessampleset
const
queryinfo
queryinfo
const
unsigned
iterations
statsutil
sutil
srand
150
float
totaltime
0
0
float
totalelements
0
0
divideskipmerger
merger
false
unsigned
rep
2
unsigned
0
rep
unsigned
0
queriessampleset
size
unsigned
string
query
queriessampleset
unsigned
0
queryinfo
affectedleaves
size
filtertreenode
leaf
queryinfo
affectedleaves
vector
invertedlists
leaf
getinvertedlists
query
gramgen
invertedlists
invertedlists
size
candidates
sutil
starttimemeasurement
merger
merge
invertedlists
queryinfo
originalthreshold
candidates
sutil
stoptimemeasurement
totaltime
sutil
gettimemeasurement
tfmsec
unsigned
0
invertedlists
size
totalelements
invertedlists
size
totalelements
0
avgmergetime
totaltime
totalelements
else
cout
warning
forced
estimated
mergetime
zero
something
wrong
check
ftixerholesglobal
cc
endl
just
set
default
value
avgmergetime
1
0e
35
template
unsigned
ftindexerdiscardliststimecost
choosegram
set
orderedgramset
const
vector
queriessampleset
const
vector
dictsampleset
grammap
queriesmap
queryinfo
queryinfo
unsigned
totalmergeelements
unsigned
totalcandidates
unsigned
totalpaniccandidates
unsigned
long
memsum
float
bestratio
float
currentratio
0
bestratio
0
0
pair
bestgram
bestgram
first
0
bestgram
second
0
set
iterator
remove
best
set
iterator
iter
orderedgramset
begin
iter
orderedgramset
end
iter
unsigned
gramhole
iter
gramcode
simulate
hole
estimate
new
number
candidates
number
elements
merge
unsigned
newtotalmergeelements
totalmergeelements
unsigned
newtotalcandidates
totalcandidates
unsigned
newtotalpaniccandidates
totalpaniccandidates
simulatehole
false
gramhole
dictsampleset
size
queriessampleset
queriesmap
queryinfo
totalmergeelements
totalcandidates
totalpaniccandidates
newtotalmergeelements
newtotalcandidates
newtotalpaniccandidates
float
approxmergetime
getapproxmergetime
newtotalmergeelements
float
approxpostprocesstime
getapproxpostprocesstime
newtotalcandidates
float
approxpanictime
getapproxpostprocesstime
newtotalpaniccandidates
float
approxtotaltime
approxmergetime
approxpostprocesstime
approxpanictime
ratiocost
currentratio
float
iter
listsize
float
approxtotaltime
else
currentratio
1
0
float
approxtotaltime
currentratio
bestratio
bestgram
first
iter
gramcode
bestgram
second
iter
listsize
bestratio
currentratio
remove
best
iter
memsum
bestgram
second
orderedgramset
erase
remove
best
return
bestgram
first
template
unsigned
ftindexerdiscardliststimecost
calculatenewcandidates
const
string
query
const
unsigned
threshold
const
unsigned
holeoccur
const
unsigned
arraysize
const
vector
nonzeroscancounts
const
vector
affectedstrings
const
bool
makepermanent
unsigned
scancountarray
affectedstrings
null
unsigned
0
affectedstrings
size
unsigned
id
affectedstrings
scancountarray
id
holeoccur
signed
scancountarray
id
0
scancountarray
id
0
use
non
zero
scan
count
vector
calculate
new
candidates
unsigned
resultsize
0
unsigned
end
nonzeroscancounts
size
unsigned
0
end
nonzeroscancounts
threshold
signed
nonzeroscancounts
0
resultsize
roll
back
makepermanent
affectedstrings
null
unsigned
0
affectedstrings
size
unsigned
id
affectedstrings
scancountarray
id
holeoccur
return
resultsize
template
void
ftindexerdiscardliststimecost
simulatehole
const
bool
makepermanent
const
unsigned
hole
const
unsigned
dictsize
const
vector
queriessampleset
grammap
queriesmap
queryinfo
queryinfo
unsigned
oldtotalmergeelements
unsigned
oldtotalcandidates
unsigned
oldtotalpaniccandidates
unsigned
newtotalmergeelements
unsigned
newtotalcandidates
unsigned
newtotalpaniccandidates
newtotalmergeelements
oldtotalmergeelements
newtotalcandidates
oldtotalcandidates
newtotalpaniccandidates
oldtotalpaniccandidates
queriesmap
find
hole
queriesmap
end
gramlist
changedqueries
gramlist
getarray
unsigned
0
changedqueries
size
unsigned
changedqueryid
changedqueries
string
query
queriessampleset
changedqueryid
unsigned
holes
queryinfo
changedqueryid
holes
queryinfo
changedqueryid
gramoccur
hole
vector
affectedleaves
queryinfo
changedqueryid
affectedleaves
calculate
signed
signed
simmetric
getmergethreshold
query
simthreshold
holes
check
panic
unsigned
currentcandidates
0
size
grammap
grammap
affectedleaves
grammap
vector
invertedlist
null
grammap
find
hole
grammap
end
invertedlist
grammap
hole
getarray
currentcandidates
calculatenewcandidates
query
queryinfo
changedqueryid
gramoccur
hole
dictsize
queryinfo
changedqueryid
nonzeroscancounts
invertedlist
makepermanent
queryinfo
changedqueryid
scancounts
unsigned
0
affectedleaves
size
grammap
grammap
affectedleaves
grammap
grammap
find
hole
grammap
end
newtotalmergeelements
grammap
hole
getarray
size
sanity
check
currentcandidates
queryinfo
changedqueryid
paniccost
cout
insane
currentcandidates
queryinfo
changedqueryid
paniccost
endl
newtotalcandidates
queryinfo
changedqueryid
originalcandidates
newtotalcandidates
currentcandidates
makepermanent
queryinfo
changedqueryid
originalcandidates
currentcandidates
queryinfo
changedqueryid
holes
queryinfo
changedqueryid
holes
queryinfo
changedqueryid
gramoccur
hole
makepermanent
oldtotalmergeelements
newtotalmergeelements
oldtotalcandidates
newtotalcandidates
oldtotalpaniccandidates
newtotalpaniccandidates
template
void
ftindexerdiscardliststimecost
chooseholegrams
cost
vector
dictsampleset
vector
queriessampleset
fillsamplesets
false
dictsampleset
queriessampleset
unsigned
queriessamplesize
queriessampleset
size
set
orderedgramset
unordered
map
countmap
unsigned
long
totallistelements
0
fillstructsforholes
orderedgramset
countmap
totallistelements
attention
heuristic
speedup
cleanse
orderedgramset
insignificant
grams
grams
listsize
1
bool
memcanbesatisfied
cleanseorderedgramset
totallistelements
countmap
size
orderedgramset
memcanbesatisfied
set
iterator
iter
orderedgramset
begin
iter
orderedgramset
end
iter
holegrams
insert
iter
gramcode
cout
memory
requirement
satisfied
holes
endl
return
create
index
run
queries
using
global
holes
indexer
create
temp
string
collection
stringcontainervector
tmpdictcontainer
new
stringcontainervector
tmpdictcontainer
fillcontainer
dictsampleset
begin
dictsampleset
end
ftindexermemgramgen
maxstrlen
ftfanout
unsigned
0
filtertypes
size
sampleindexer
addpartfilter
filtertypes
clone
sampleindexer
buildindex
delete
tmpdictcontainer
create
index
queries
create
temp
string
collection
stringcontainervector
tmpqueriescontainer
new
stringcontainervector
tmpqueriescontainer
fillcontainer
queriessampleset
begin
queriessampleset
end
ftindexermemgramgen
maxstrlen
ftfanout
queriesindexer
buildindex
delete
tmpqueriescontainer
grammap
queriesmap
queriesindexer
filtertreeroot
grammap
pre
process
queries
store
information
queryinfo
unsigned
totalmergeelements
0
unsigned
totalcandidates
0
unsigned
totalpaniccandidates
0
queryinfo
queryinfo
new
queryinfo
queriessamplesize
fillqueryinfo
sampleindexer
queriessampleset
dictsampleset
size
queryinfo
totalmergeelements
totalcandidates
totalpaniccandidates
estimateavgpostprocesstime
dictsampleset
queriessampleset
queryinfo
workload
size
estimateavgmergetime
dictsampleset
queriessampleset
queryinfo
workload
size
unsigned
long
memmax
unsigned
long
totallistelements
reductionratio
unsigned
long
memsum
0
memsum
memmax
unsigned
chosengram
0
float
bestratio
0
0
choose
gram
chosengram
choosegram
orderedgramset
queriessampleset
dictsampleset
queriesmap
queryinfo
totalmergeelements
totalcandidates
totalpaniccandidates
memsum
bestratio
make
change
permanent
unsigned
tmptotalmergeelements
totalmergeelements
unsigned
tmptotalcandidates
totalcandidates
unsigned
tmptotalpaniccandidates
totalpaniccandidates
simulatehole
true
chosengram
dictsampleset
size
queriessampleset
queriesmap
queryinfo
totalmergeelements
totalcandidates
totalpaniccandidates
tmptotalmergeelements
tmptotalcandidates
tmptotalpaniccandidates
insert
gram
blacklist
holegrams
insert
chosengram
free
queryinfo
memory
freequeryinfo
queryinfo
queriessampleset
size
delete
queryinfo
ifdef
debug
stat
dynamic
cast
ixstats
numberholes
holegrams
size
endif
template
class
ftindexerdiscardlistspaniccost
template
struct
ftindexertraits
typedef
tstringcontainer
stringcontainer
typedef
tinvlist
invlist
template
class
ftindexerdiscardlistspaniccost
public
ftindexerdiscardlistscostabs
private
typedef
ftindexerdiscardlistscostabs
superclass
protected
typedef
typename
superclass
grammap
grammap
void
simulatehole
unsigned
hole
vector
queriessampleset
grammap
queriesmap
queryinfo
queryinfo
unsigned
oldpanics
unsigned
newpanics
bool
makepermanent
public
ftindexerdiscardlistspaniccost
stringcontainer
strcontainer
superclass
strcontainer
ftindexerdiscardlistspaniccost
stringcontainer
strcontainer
gramgen
gramgen
const
float
reductionratio
const
vector
workload
const
simmetric
simmetric
const
float
simthreshold
const
bool
ratiocost
false
const
float
dictsamplingfrac
0
01f
const
float
queriessamplingfrac
0
25f
const
unsigned
maxstrlen
150
const
unsigned
ftfanout
50
superclass
strcontainer
gramgen
reductionratio
workload
simmetric
simthreshold
ratiocost
dictsamplingfrac
queriessamplingfrac
maxstrlen
ftfanout
indexertype
holes
global
paniccost
string
getname
return
ftindexerdiscardlistspaniccost
void
chooseholegrams
cost
template
void
ftindexerdiscardlistspaniccost
simulatehole
unsigned
hole
vector
queriessampleset
grammap
queriesmap
queryinfo
queryinfo
unsigned
oldpanics
unsigned
newpanics
bool
makepermanent
queriesmap
find
hole
queriesmap
end
gramlist
changedqueries
gramlist
getarray
unsigned
0
changedqueries
size
unsigned
changedqueryid
changedqueries
string
query
queriessampleset
changedqueryid
unsigned
holes
queryinfo
changedqueryid
holes
queryinfo
changedqueryid
gramoccur
hole
calculate
signed
signed
simmetric
getmergethreshold
query
simthreshold
holes
check
panic
void
ftindexerdiscardlistspaniccost
chooseholegrams
cost
vector
dictsampleset
vector
queriessampleset
fillsamplesets
false
dictsampleset
queriessampleset
unsigned
queriessamplesize
queriessampleset
size
set
orderedgramset
unordered
map
countmap
unsigned
long
totallistelements
0
fillstructsforholes
orderedgramset
countmap
totallistelements
attention
heuristic
speedup
cleanse
orderedgramset
insignificant
grams
grams
listsize
1
bool
memcanbesatisfied
cleanseorderedgramset
totallistelements
countmap
size
orderedgramset
memcanbesatisfied
set
iterator
iter
orderedgramset
begin
iter
orderedgramset
end
iter
holegrams
insert
iter
gramcode
cout
memory
requirement
satisfied
holes
endl
return
create
index
run
queries
using
global
holes
indexer
create
temp
string
collection
stringcontainervector
tmpdictcontainer
new
stringcontainervector
false
tmpdictcontainer
fillcontainer
dictsampleset
begin
dictsampleset
end
ftindexermemgramgen
maxstrlen
ftfanout
unsigned
0
filtertypes
size
sampleindexer
addpartfilter
filtertypes
clone
sampleindexer
buildindex
delete
tmpdictcontainer
create
index
queries
create
temp
string
collection
stringcontainervector
tmpqueriescontainer
new
stringcontainervector
false
tmpqueriescontainer
fillcontainer
queriessampleset
begin
queriessampleset
end
ftindexermemgramgen
maxstrlen
ftfanout
queriesindexer
buildindex
delete
tmpqueriescontainer
grammap
queriesmap
queriesindexer
filtertreeroot
grammap
pre
process
queryinfo
unsigned
totalmergeelements
0
unsigned
totalcandidates
0
unsigned
totalpaniccandidates
0
queryinfo
queryinfo
new
queryinfo
queriessamplesize
fillqueryinfo
sampleindexer
queriessampleset
dictsampleset
size
queryinfo
totalmergeelements
totalcandidates
totalpaniccandidates
unsigned
totalpanics
totalpaniccandidates
unsigned
long
memmax
unsigned
long
totallistelements
reductionratio
unsigned
long
memsum
0
memsum
memmax
float
currentratio
0
float
bestratio
0
pair
bestgram
bestgram
first
0
bestgram
second
0
set
iterator
remove
set
iterator
iter
orderedgramset
begin
iter
orderedgramset
end
iter
simulate
hole
estimate
new
number
candidates
number
elements
merge
unsigned
newtotalpanics
totalpanics
simulatehole
iter
gramcode
queriessampleset
queriesmap
queryinfo
totalpanics
newtotalpanics
false
newtotalpanics
ratiocost
currentratio
float
iter
listsize
float
newtotalpanics
else
currentratio
1
0
float
newtotalpanics
currentratio
bestratio
bestgram
first
iter
gramcode
bestgram
second
iter
listsize
bestratio
currentratio
remove
iter
memsum
bestgram
second
orderedgramset
erase
remove
holegrams
insert
bestgram
first
permanently
record
hole
affected
queries
unsigned
newtotalpanics
totalpanics
simulatehole
bestgram
first
queriessampleset
queriesmap
queryinfo
totalpanics
newtotalpanics
true
cout
chosen
memsum
memmax
bestgram
first
bestgram
second
totalpanics
endl
free
queryinfo
memory
freequeryinfo
queryinfo
queriessampleset
size
delete
queryinfo
ifdef
debug
stat
dynamic
cast
ixstats
numberholes
holegrams
size
endif
endif

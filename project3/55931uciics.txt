
statsgen 
id
statsgen
5788
2010
10
22
10
09
57z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
04
04
2008
author
alexander
behm
ifndef
statsgen
define
statsgen
include
statsutil
include
ftindexermem
include
ftindexerdiscardlists
include
ftindexercombinelists
include
ftindexerondisk
include
ftsearcherondisk
include
ftsearchermem
include
common
src
gramgen
include
common
src
simmetric
include
util
src
looptimer
using
namespace
std
extern
void
genzipfdist
unsigned
distinctvals
unsigned
skew
double
valfreqs
extern
void
readstring
vector
data
const
string
filenamedata
unsigned
count
unsigned
maxlinelen
enum
queriesdistribution
qd
uniform
qd
zipf
enum
outputflags
workloadstats
0x0001
querystats
0x0002
queryresults
0x0004
class
statsgenconfig
public
statsgenconfig
start
config
options
types
indexes
gramgen
gramgen
simmetric
simmetric
float
simthresh
vector
filtertypes
string
dictdatafile
unsigned
dictsizestart
dictsizestop
dictsizestep
unsigned
fanout
unsigned
maxstrlen
bool
autopartfilter
unsigned
numberqueries
unsigned
distinctqueries
queriesdistribution
queriesdistrib
unsigned
zipfskew
unsigned
numberruns
querytype
qt
postmergefilter
pmf
unsigned
lccharnum
unsigned
hcbuckets
char
outputflags
string
outputfileprefix
string
wlstatsfile
string
querystatsfile
string
queryresultsfile
string
existingworkloadfile
string
existingindexfile
string
existingstringcontainer
string
saveworkloadfile
double
tdistquant
calculating
confidence
intervals
end
config
options
types
indexes
start
config
options
compressed
memory
indexes
float
reductionstart
reductionstop
reductionstep
float
dictsamplingfrac
queriessamplingfrac
bool
sampleratiocost
end
config
options
compressed
memory
indexes
start
config
options
disk
based
indexes
bool
dropcachesbeforeeachquery
bool
dropcachesbeforebuildingindex
bool
disablestreambuffer
unsigned
runbuffer
bool
scatteredorg
physord
pho
unsigned
avgstrlen
unsigned
bufferslots
end
config
options
compressed
memory
indexes
void
setsimmetric
simmetric
simmetric
float
simthresh
simmetric
simmetric
simthresh
simthresh
void
setgramgen
gramgen
gramgenerator
gramgen
gramgenerator
void
setfanout
unsigned
fanout
fanout
fanout
void
setmaxstrlen
const
unsigned
maxstrlen
maxstrlen
maxstrlen
void
setdictdatafile
const
string
datafile
dictdatafile
datafile
void
setdictsize
unsigned
start
unsigned
stop
unsigned
step
dictsizestart
start
dictsizestop
stop
dictsizestep
step
void
setdistinctqueries
unsigned
distinctqueries
void
setnumberqueries
unsigned
numberqueries
numberqueries
numberqueries
void
setqueriesdistribution
queriesdistribution
qd
queriesdistrib
qd
void
setzipfskew
unsigned
zipfskew
void
setnumberruns
unsigned
numberruns
void
setoutputfileprefix
const
string
outputfileprefix
void
setoutputflags
char
outputflags
outputflags
outputflags
void
addpartfilter
abstractfilter
filtertypes
push
back
void
clearfilters
void
setautopartfilter
bool
autopartfilter
void
setpostmergefilter
postmergefilter
pmf
void
useexistingworkload
const
string
filename
existingworkloadfile
filename
void
useexistingindex
const
string
filename
existingindexfile
filename
void
useexistingstringcontainer
const
string
filename
existingstringcontainer
filename
void
setreduction
float
start
float
stop
float
step
reductionstart
start
reductionstop
stop
reductionstep
step
void
setdictsamplingfrac
float
dictsamplingfrac
void
setqueriessamplingfrac
float
queriessamplingfrac
void
setsampleratiocost
bool
sampleratiocost
void
setrunbuffer
unsigned
runbuffer
runbuffer
runbuffer
void
setdropcachesbeforeeachquery
bool
dropcachesbeforeeachquery
void
setdisablestreambuffer
bool
disablestreambuffer
void
setdropcachesbeforebuildingindex
bool
dropcachesbeforebuildingindex
void
setscatteredorg
bool
scatteredorg
void
setphysord
physord
pho
void
setavgstrlen
unsigned
avgstrlen
void
settdistquant
double
tdistquant
void
setlettercountcharnum
unsigned
lccharnum
void
sethashcountbuckets
unsigned
hcbuckets
void
setquerytype
querytype
qt
qt
qt
void
saveworkload
const
string
outputfile
saveworkloadfile
outputfile
statsgenconfig
clearfilters
function
template
creating
stringcontainer
default
initialization
template
createdefaultstringcontainer
statsgenconfig
config
template
openstringcontainer
statsgenconfig
config
template
struct
statsgentraits
template
class
statsgenabs
public
typedef
statsgentraits
traitstype
typedef
typename
traitstype
ftindexer
ftindexer
typedef
typename
traitstype
ftsearcher
ftsearcher
typedef
ftindexertraits
indexertraitstype
typedef
typename
indexertraitstype
stringcontainer
stringcontainer
typedef
typename
indexertraitstype
invlist
invlist
typedef
ftsearchertraits
searchertraitstype
typedef
typename
searchertraitstype
merger
merger
protected
statsgenconfig
config
merger
merger
void
setpartfilters
ftindexer
ftixer
void
fillworkload
stringcontainer
strcontainer
vector
workload
void
fillworkloadnormal
stringcontainer
strcontainer
vector
workload
void
fillworkloadzipf
stringcontainer
strcontainer
vector
workload
one
must
overridden
actual
statsgen
void
setindexerandsearcher
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
static
cast
setindexerandsearcher
impl
strcontainer
reductionratio
ftfanout
workload
runbuffersize
public
statsgenabs
statsgenabs
statsgenconfig
config
config
config
void
generateworkloads
unsigned
distinctqueries
unsigned
workloadsize
void
genwloadsamezipf
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
void
genwloaddiffzipf
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
void
genwloadsamenormal
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
void
genwloaddiffnormal
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
ftindexer
ftindexer
ftsearcher
ftsearcher
void
setmerger
merger
merger
merger
merger
generate
stats
approximate
string
search
void
generate
template
class
statsgen
template
struct
statsgentraits
typedef
tftindexer
ftindexer
typedef
tftsearcher
ftsearcher
template
class
ftsearcher
ftsearchermem
class
statsgen
public
statsgenabs
public
typedef
ftindexertraits
indexertraitstype
typedef
typename
indexertraitstype
stringcontainer
stringcontainer
typedef
typename
indexertraitstype
invlist
invlist
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
cout
specialization
implemented
yet
endl
partial
specialization
handle
uncompressed
indexer
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexermem
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
holesgloballlf
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexerdiscardlistsllf
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
holesglobalslf
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexerdiscardlistsslf
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
holesglobalrandom
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexerdiscardlistsrandom
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
holesglobaltimecost
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexerdiscardliststimecost
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
workload
config
simmetric
config
simthresh
config
sampleratiocost
config
dictsamplingfrac
config
queriessamplingfrac
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
holesglobalpaniccost
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexerdiscardlistspaniccost
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
workload
config
simmetric
config
simthresh
config
sampleratiocost
config
dictsamplingfrac
config
queriessamplingfrac
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
unionglobalbasic
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexercombinelistsbasic
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
config
dictsamplingfrac
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
compressed
indexer
unionglobalcost
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexercombinelistscost
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
reductionratio
workload
config
simmetric
config
simthresh
config
dictsamplingfrac
config
queriessamplingfrac
config
maxstrlen
ftfanout
ftsearcher
new
ftsearcher
merger
ftindexer
partial
specialization
handle
disk
based
indexer
ftindexerondisk
template
class
statsgen
ftsearcher
public
statsgenabs
ftsearcher
public
typedef
ftindexerondisk
indexer
statsgen
statsgenconfig
config
config
config
void
setindexerandsearcher
impl
stringcontainer
strcontainer
const
float
reductionratio
const
unsigned
ftfanout
const
vector
workload
const
unsigned
runbuffersize
statsgenconfig
config
config
ftindexer
new
indexer
strcontainer
config
gramgen
config
disablestreambuffer
invlists
ix
runbuffersize
config
maxstrlen
ftfanout
config
pmf
config
lccharnum
config
hcbuckets
config
scatteredorg
ftsearcher
new
ftsearcher
merger
ftindexer
template
void
statsgenabs
setpartfilters
ftindexer
ftixer
config
autopartfilter
ftixer
autoaddpartfilter
else
unsigned
0
config
filtertypes
size
ftixer
addpartfilter
config
filtertypes
clone
template
void
statsgenabs
generate
statsgenconfig
config
config
looptimer
looptimer
int
sysret
0
typename
ftindexer
ixstatstype
ixstats
typename
ftsearcher
wlstatstype
wlstats
config
wlstatsfile
config
outputfileprefix
string
wlstats
txt
ofstream
fpwlstats
config
outputflags
workloadstats
fpwlstats
open
config
wlstatsfile
str
ios
ixstats
printheader
fpwlstats
fpwlstats
wlstats
printheader
fpwlstats
fpwlstats
endl
config
queryresultsfile
config
outputfileprefix
string
qresults
txt
ofstream
fpqueryresults
config
outputflags
queryresults
fpqueryresults
open
config
queryresultsfile
str
ios
config
querystatsfile
config
outputfileprefix
string
qstats
txt
ofstream
fpquerystats
bool
querystatsheaderprinted
false
config
outputflags
querystats
fpquerystats
open
config
querystatsfile
str
ios
read
dictionary
different
sizes
perform
batch
data
generation
write
data
file
unsigned
dict
config
dictsizestart
dict
dictsizestop
dict
config
dictsizestep
stringcontainer
strcontainer
null
config
existingstringcontainer
length
0
strcontainer
openstringcontainer
config
else
strcontainer
createdefaultstringcontainer
config
strcontainer
initstatscollector
config
gramgen
strcontainer
fillcontainer
config
dictdatafile
str
dict
config
maxstrlen
check
see
workload
manually
overridden
vector
workload
config
existingworkloadfile
length
0
readstring
workload
config
existingworkloadfile
config
numberqueries
config
maxstrlen
else
fillworkload
strcontainer
workload
config
saveworkloadfile
length
0
ofstream
osworkload
osworkload
open
config
saveworkloadfile
str
ios
unsigned
0
workload
size
osworkload
workload
endl
osworkload
close
cout
saved
workload
config
saveworkloadfile
endl
float
reduction
config
reductionstart
reduction
reductionstop
reduction
config
reductionstep
ixstats
reset
wlstats
reset
unsigned
runs
0
runs
config
numberruns
runs
strcontainer
flushcache
runs
0
setindexerandsearcher
strcontainer
reduction
config
fanout
workload
config
runbuffer
setpartfilters
ftindexer
config
dropcachesbeforebuildingindex
ftindexer
gettype
ondisk
sysret
system
sync
sysret
system
echo
3
proc
sys
vm
drop
caches
cout
endl
cout
starting
experiment
endl
cout
indexer
ftindexer
getname
endl
cout
searcher
ftsearcher
getname
endl
cout
merger
merger
getname
endl
cout
dictionary
size
dict
endl
cout
fanout
config
fanout
endl
cout
partfilters
unsigned
0
config
filtertypes
size
cout
config
filtertypes
getname
1
config
filtertypes
size
cout
endl
else
cout
cout
reduction
ratio
reduction
endl
cout
runbuffer
size
config
runbuffer
endl
cout
flush
config
existingindexfile
length
0
cout
loading
index
config
existingindexfile
endl
ftindexer
loadindex
config
existingindexfile
str
else
cout
building
index
endl
ftindexer
buildindex
ixstats
add
ftindexer
getindexstats
ftsearcher
prepare
always
start
queries
cold
store
runs
0
ftindexer
gettype
ondisk
sysret
system
sync
sysret
system
echo
3
proc
sys
vm
drop
caches
char
message
100
sprintf
message
executing
queries
run
runs
1
config
numberruns
looptimer
begin
message
workload
size
unsigned
0
workload
size
config
dropcachesbeforeeachquery
ftindexer
gettype
ondisk
sysret
system
sync
sysret
system
echo
3
proc
sys
vm
drop
caches
vector
results
query
query
workload
config
simmetric
config
simthresh
config
qt
ftsearcher
search
query
results
querystats
querystats
ftsearcher
getquerystats
querystats
qid
wlstats
add
querystats
output
query
results
change
multiple
runs
config
outputflags
queryresults
runs
0
fpqueryresults
workload
results
size
endl
sort
results
begin
results
end
unsigned
res
0
res
results
size
res
fpqueryresults
results
res
fpqueryresults
endl
looptimer
next
looptimer
end
flush
query
stats
config
outputflags
querystats
querystatsheaderprinted
wlstats
allquerystats
0
printheader
fpquerystats
fpquerystats
endl
querystatsheaderprinted
true
unsigned
0
wlstats
allquerystats
size
wlstats
allquerystats
print
fpquerystats
fpquerystats
endl
cout
endl
ixstats
avg
wlstats
avg
config
numberqueries
config
numberruns
config
outputflags
workloadstats
ixstats
print
fpwlstats
fpwlstats
wlstats
print
fpwlstats
fpwlstats
endl
delete
ftsearcher
delete
ftindexer
delete
strcontainer
config
outputflags
workloadstats
fpwlstats
close
config
outputflags
queryresults
fpqueryresults
close
config
outputflags
querystats
fpquerystats
close
template
void
statsgenabs
fillworkload
stringcontainer
strcontainer
vector
workload
config
numberqueries
0
config
distinctqueries
0
switch
config
queriesdistrib
case
qd
uniform
fillworkloadnormal
strcontainer
workload
break
case
qd
zipf
fillworkloadzipf
strcontainer
workload
break
template
void
statsgenabs
fillworkloadnormal
stringcontainer
strcontainer
vector
workload
srand
150
unsigned
workloadsize
config
numberqueries
unsigned
numberoccurences
workloadsize
config
distinctqueries
unsigned
0
config
distinctqueries
unsigned
stringindex
strcontainer
size
100000
rand
strcontainer
size
rand
100000
unsigned
0
numberoccurences
string
tmp
strcontainer
retrievestring
tmp
stringindex
workload
push
back
tmp
template
void
statsgenabs
fillworkloadzipf
stringcontainer
strcontainer
vector
workload
srand
150
unsigned
workloadsize
config
numberqueries
vector
stringindexes
double
valfreqs
config
distinctqueries
genzipfdist
config
distinctqueries
config
zipfskew
valfreqs
unsigned
0
config
distinctqueries
unsigned
numberoccurences
unsigned
floor
double
workloadsize
valfreqs
unsigned
stringindex
strcontainer
size
100000
rand
strcontainer
size
rand
100000
stringindexes
push
back
stringindex
unsigned
0
numberoccurences
string
tmp
strcontainer
retrievestring
tmp
stringindex
workload
push
back
tmp
unsigned
remaining
workloadsize
workload
size
unsigned
next
0
unsigned
0
remaining
string
tmp
strcontainer
retrievestring
tmp
stringindexes
next
workload
push
back
tmp
next
next
stringindexes
size
next
0
template
void
statsgenabs
generateworkloads
unsigned
distinctqueries
unsigned
workloadsize
cout
generating
workloads
endl
vector
dictionary
readstring
dictionary
config
dictdatafile
1000000
250
cout
zipf
endl
genwloadsamezipf
dictionary
distinctqueries
workloadsize
cout
diff
zipf
endl
genwloaddiffzipf
dictionary
distinctqueries
workloadsize
cout
normal
endl
genwloadsamenormal
dictionary
distinctqueries
workloadsize
cout
diff
normal
endl
genwloaddiffnormal
dictionary
distinctqueries
workloadsize
cout
done
endl
template
void
statsgenabs
genwloaddiffzipf
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
srand
150
vector
workload
vector
stringindexes
double
valfreqs
config
distinctqueries
genzipfdist
config
distinctqueries
config
zipfskew
valfreqs
unsigned
0
config
distinctqueries
unsigned
numberoccurences
unsigned
floor
double
workloadsize
valfreqs
unsigned
stringindex
rand
100000
100000
stringindexes
push
back
stringindex
unsigned
0
numberoccurences
workload
push
back
dictionary
stringindex
unsigned
remaining
workloadsize
workload
size
unsigned
next
0
unsigned
0
remaining
workload
push
back
dictionary
stringindexes
next
next
next
stringindexes
size
next
0
ofstream
fpout
fpout
open
queries
diff
zipf
txt
ios
unsigned
0
workload
size
fpout
workload
endl
fpout
close
template
void
statsgenabs
genwloadsamezipf
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
srand
150
vector
workload
vector
stringindexes
double
valfreqs
config
distinctqueries
genzipfdist
config
distinctqueries
config
zipfskew
valfreqs
unsigned
0
config
distinctqueries
unsigned
numberoccurences
unsigned
floor
double
workloadsize
valfreqs
unsigned
stringindex
rand
100000
stringindexes
push
back
stringindex
unsigned
0
numberoccurences
workload
push
back
dictionary
stringindex
unsigned
remaining
workloadsize
workload
size
unsigned
next
0
unsigned
0
remaining
workload
push
back
dictionary
stringindexes
next
next
next
stringindexes
size
next
0
ofstream
fpout
fpout
open
queries
zipf
txt
ios
unsigned
0
workload
size
fpout
workload
endl
fpout
close
template
void
statsgenabs
genwloadsamenormal
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
srand
150
vector
workload
unsigned
numberoccurences
workloadsize
distinctqueries
unsigned
0
distinctqueries
unsigned
stringindex
rand
100000
unsigned
0
numberoccurences
workload
push
back
dictionary
stringindex
ofstream
fpout
fpout
open
queries
normal
txt
ios
unsigned
0
workload
size
fpout
workload
endl
fpout
close
template
void
statsgenabs
genwloaddiffnormal
vector
dictionary
unsigned
distinctqueries
unsigned
workloadsize
srand
150
vector
workload
unsigned
numberoccurences
workloadsize
distinctqueries
unsigned
0
distinctqueries
unsigned
stringindex
rand
100000
100000
unsigned
0
numberoccurences
workload
push
back
dictionary
stringindex
ofstream
fpout
fpout
open
queries
diff
normal
txt
ios
unsigned
0
workload
size
fpout
workload
endl
fpout
close
endif

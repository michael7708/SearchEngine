
ondiskmergeradapt cc 
id
ondiskmergeradapt
cc
5149
2010
03
24
23
37
18z
abehm
copyright
2010
regents
university
california
redistribution
file
permitted
terms
bsd
license
date
09
06
2008
author
alexander
behm
include
ondiskmergeradapt
float
candidate
wildcarded
const
string
s1
const
string
s2
const
char
wildchar
uint
icrt
ipre
uint
s1
length
s2
length
0
return
0
return
uint
2
1
0
wildcarded
const
char
s1
const
char
s2
unsigned
unsigned
const
char
wildchar
uint
icrt
ipre
0
return
0
return
uint
2
1
0
checkmismatches
const
query
query
unsigned
gramlength
unsigned
count
0
unsigned
location
0
set
iterator
iter
mismatchpositions
begin
iter
mismatchpositions
end
iter
iter
location
count
location
iter
gramlength
1
count
query
threshold
ispruned
posfilter
mismatch
void
candidate
checkpartialstring
const
query
query
const
string
prepostquerystr
float
ed
wildcarded
prepostquerystr
partialstr
ed
query
threshold
ispruned
posfilter
dp
void
candidate
checksubstrfilter
const
query
query
const
string
prepostquerystr
const
string
gram
unsigned
gramlength
unsigned
stringlength
unsigned
char
stringpos
unsigned
char
querypos
unsigned
substrfiltercount
unsigned
querylength
prepostquerystr
size
sanity
check
stringpos
querylength
return
signed
lengthdiff
abs
signed
querylength
signed
stringlength
mismatch
substrfiltercount
0
lengthdiff
signed
gramlength
stringlength
query
end
pos
lengthdiff
else
string
end
pos
lengthdiff
query
end
pos
prepostquerystr
size
query
end
pos
prepostquerystr
size
string
end
pos
stringlength
string
end
pos
stringlength
float
ed
wildcarded
prepostquerystr
str
start
pos
partialstr
str
start
pos
query
end
pos
start
pos
string
end
pos
start
pos
wildchar
ed
query
threshold
ispruned
posfilter
substr
template
processposid
const
query
query
const
string
prepostquerystr
unsigned
gramcode
unsigned
candiid
vector
wglpos
unsigned
char
candipos
bool
posmatched
candidate
const
string
gram
gramcode2gram
gramcode
updatepartialstring
gram
candipos
unsigned
gramlength
gramgen
getgramlength
unsigned
prepostcandistrlen
gramgen
getprepoststrlen
charsumstats
candiid
length
apply
position
filter
remember
matching
grams
queries
perspective
unsigned
substrfiltercount
0
unsigned
char
substrfilterquerypos
0
unsigned
0
wglpos
size
unsigned
char
posdiff
wglpos
candipos
wglpos
candipos
candipos
wglpos
posdiff
ispruned
posfilter
substr
checksubstrfilter
query
prepostquerystr
gram
gramlength
prepostcandistrlen
candipos
substrfilterquerypos
substrfiltercount
template
addremainingcandidates
const
query
query
const
string
prepostquerystr
leafcontext
lc
vector
results
const
unsigned
0
lc
candidates
size
candidate
lc
candidates
posfilters
posfilter
enddp
checkpartialstring
query
prepostquerystr
ispruned
results
push
back
id
delete
template
iterator
ondiskmergeradapt
expprobe
array
iterator
start
array
iterator
end
unsigned
value
const
unsigned
0
array
iterator
iter
start
1
iter
end
return
end
else
iter
id
value
return
iter
template
detectduplicatelists
vector
qgls
vector
wgls
const
sort
qgls
begin
qgls
end
ondiskmergeradapt
cmpqglbygramcode
unsigned
0
qgls
size
querygramlist
currentqgl
qgls
unsigned
currentcount
0
weightedgramlist
wgl
new
weightedgramlist
qgls
size
currentqgl
gramcode
qgls
gramcode
currentqgl
qgls
currentcount
wgl
positions
push
back
currentqgl
pos
else
break
wgl
gramcode
currentqgl
gramcode
wgl
gramlist
dynamic
cast
currentqgl
gl
wgl
weight
currentcount
wgls
push
back
wgl
template
heapmerge
const
query
query
const
string
prepostquerystr
leafcontext
lc
vector
results
const
typedef
array
invlist
unsigned
numberlists
lc
initiallists
unsigned
pointersindex
numberlists
memset
pointersindex
0
numberlists
sizeof
unsigned
heap
heap
numberlists
make
initial
heap
unsigned
0
numberlists
unsigned
0
invlist
invlist
lc
wgls
gramlist
getarray
unsigned
currentid
invlist
0
id
invlist
size
posid
invlist
currentid
id
heap
push
new
heapmergeelement
pointersindex
else
break
heapmergeelement
poppedelements
numberlists
heap
empty
container
vector
indexes
moved
next
position
unsigned
poppedelementcount
0
unsigned
currentid
heap
head
element
id
unsigned
weight
0
candidate
new
candidate
gramgen
getprepoststrlen
charsumstats
currentid
length
currentid
heap
head
element
id
poppedelementcount
numberlists
poppedelements
poppedelementcount
heap
head
unsigned
currentlistindex
heap
head
listindex
vector
wglpos
lc
wgls
heap
head
listindex
positions
bool
posmatched
wglpos
size
memset
posmatched
0
sizeof
bool
wglpos
size
unsigned
samelistcount
0
currentlistindex
heap
head
listindex
currentid
heap
head
element
id
samelistcount
processposid
query
prepostquerystr
lc
wgls
currentlistindex
gramcode
currentid
wglpos
heap
head
element
pos
posmatched
heap
pop
heap
empty
break
safety
count
matched
grams
queries
perspective
set
mismatched
grams
queries
perspective
unsigned
matches
0
unsigned
0
wglpos
size
posmatched
matches
else
mismatchpositions
insert
wglpos
make
weight
tight
possible
weight
min
samelistcount
matches
heap
empty
break
safety
weight
may
0
due
position
filter
disregard
candidates
zero
weight
also
analyze
mismatching
positions
see
can
prune
candidate
posfilters
posfilter
mismatch
checkmismatches
query
gramgen
getgramlength
weight
0
ispruned
posfilters
posfilter
length
ispruned
checklength
query
prepostquerystr
posfilters
posfilter
dp
ispruned
checkpartialstring
query
prepostquerystr
ispruned
id
currentid
weight
weight
lc
candidates
push
back
else
delete
else
id
currentid
weight
weight
lc
candidates
push
back
else
delete
move
next
elements
insert
heap
unsigned
0
poppedelementcount
unsigned
index
poppedelements
listindex
unsigned
position
pointersindex
index
invlist
invlist
lc
wgls
index
gramlist
getarray
position
invlist
size
unsigned
currentid
invlist
position
id
position
invlist
size
posid
invlist
position
currentid
id
heap
push
new
heapmergeelement
index
pointersindex
index
else
break
position
delete
poppedelements
template
readnextlists
const
query
query
const
string
prepostquerystr
leafcontext
lc
unsigned
liststoread
vector
results
const
typedef
array
invlist
unsigned
0
liststoread
weightedgramlist
wgl
lc
wgls
lc
currentlist
gramlistondisk
gl
wgl
gramlist
invlist
array
gl
getarray
lc
invlistsfile
lc
remainingweight
wgl
weight
vector
wglpos
wgl
positions
bool
posmatched
wglpos
size
remember
matched
positions
queries
perspective
lookup
every
candidate
bool
cleanseneeded
false
invlist
iterator
start
array
begin
unsigned
0
lc
candidates
size
candidate
candidate
lc
candidates
signed
candidate
weightneeded
end
candidate
id
posid
tofind
candidate
id
0
start
lower
bound
start
end
tofind
iterate
inverted
list
start
long
string
ids
match
unsigned
listmatchcount
0
memset
posmatched
0
sizeof
bool
wglpos
size
start
array
end
start
id
candidate
id
listmatchcount
processposid
query
prepostquerystr
wgl
gramcode
candidate
id
wglpos
start
pos
posmatched
candidate
else
break
string
ids
longer
match
start
count
matched
grams
queries
perspective
set
mismatched
grams
queries
perspective
unsigned
matches
0
unsigned
0
wglpos
size
posmatched
matches
else
candidate
mismatchpositions
insert
wglpos
keep
weight
tight
possible
unsigned
weight
min
listmatchcount
matches
posfilters
posfilter
mismatch
candidate
checkmismatches
query
gramgen
getgramlength
listmatchcount
0
posfilters
posfilter
dp
candidate
checkpartialstring
query
prepostquerystr
candidate
ispruned
check
add
weight
weight
0
candidate
weight
weight
candidate
weight
lc
threshold
lc
candidatecounts
candidate
weightneeded
candidate
weightneeded
0
results
push
back
candidate
id
cleanseneeded
true
adding
weight
else
lc
candidatecounts
candidate
weightneeded
candidate
weightneeded
candidate
weightneeded
wgl
weight
candidate
weightneeded
wgl
weight
0
candidate
weightneeded
lc
remainingweight
candidate
weightneeded
0
candidate
weightneeded
0
lc
candidatecounts
candidate
weightneeded
else
cleanseneeded
true
else
must
remove
candidate
lc
candidatecounts
candidate
weightneeded
candidate
weightneeded
0
cleanseneeded
true
need
remove
items
candidate
set
can
guarantee
elements
either
answers
answers
cleanseneeded
cleansecandidates
lc
candidates
gl
clear
